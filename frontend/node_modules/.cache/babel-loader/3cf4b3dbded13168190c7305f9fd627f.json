{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/pages/ProfileDetail/ProfileDetail.js\";\nimport React from \"react\";\nimport Header from \"../../common/Header\";\nimport Sidebar from \"../../common/SideBar\";\nimport Footer from \"../../common/Footer\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetUserInfo } from '../../../store/actions/UsersActions/FetchUserInfoAction';\nimport { GetUserIntrests } from '../../../store/actions/intrestsActions/GetAllInterestsAction';\nimport { GetuserLikes } from '../../../store/actions/UsersActions/GetUserlikesDislikesAction';\nimport { PutUpdateUserLikes } from '../../../store/actions/UsersActions/UpdateUserLikeDislikeAction';\nimport { BlockThisUser } from \"../../../store/actions/UsersActions/BlockUserAction\";\nimport { VisitThisUser } from '../../../store/actions/UsersActions/VisitUserAction';\nimport Moment from 'moment';\nimport { reportThisUser } from '../../../store/actions/UsersActions/ReportUserAction';\nimport { ToastContainer } from 'react-toastify';\nimport io from 'socket.io-client';\n\nconst customNotification = require('../utils/notification');\n\nclass ProfileDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstname: \"\",\n      likes: 0,\n      dislikes: 0,\n      singleHObbi: \"\",\n      psudonym: \"\",\n      socket: io(process.env.REACT_APP_API_URL),\n      lastname: \"\",\n      showAddHobi: false,\n      countLikes: 0,\n      countdisLikes: 0,\n      profilePhoto: \"\",\n      email: \"\",\n      oldMultiPhotos: [],\n      oldProfilePhoto: \"\",\n      age: \"\",\n      multiPhotos: [],\n      Password: \"\",\n      interestsArray: [],\n      SexualOrientation: \"\",\n      ProfileCompletion: \"\",\n      online: \"\",\n      updatedAt: \"\",\n      gender: \"\",\n      location: \"\",\n      Fame: \"\",\n      Bibliography: \"\",\n      selectedOption: []\n    };\n    this.handlelikes = this.handlelikes.bind(this);\n    this.handleBlock = this.handleBlock.bind(this);\n    this.handleReport = this.handleReport.bind(this);\n  }\n\n  async handleBlock(e) {\n    e.preventDefault();\n    let userId = this.props.match.params.id;\n    await this.props.onBlockThisUser(userId);\n    let userAction = localStorage.getItem(\"userId\");\n    setTimeout(() => {\n      let data = {\n        id: userAction + userId,\n        title: \"block\",\n        fullname: \"\",\n        msg: \" blocked your profile\",\n        likerId: userAction,\n        likedId: userId,\n        time: Moment()\n      };\n      this.state.socket.emit('likeUser', data);\n    }, 320);\n  }\n\n  async handleReport(e) {\n    e.preventDefault();\n    let userId = this.props.match.params.id;\n    await this.props.onreportThisUser(userId);\n    let userAction = localStorage.getItem(\"userId\");\n    setTimeout(() => {\n      let data = {\n        id: userAction + userId,\n        title: \"report\",\n        fullname: \"\",\n        msg: \" reported your profile\",\n        likerId: userAction,\n        likedId: userId,\n        time: Moment()\n      };\n      this.state.socket.emit('likeUser', data);\n    }, 320);\n  }\n\n  async handlelikes(e, state) {\n    e.preventDefault();\n    let userId = this.props.match.params.id;\n    let userAction = localStorage.getItem(\"userId\");\n    await this.props.onPutUpdateUserLikes(userId, state);\n    setTimeout(async () => {\n      await this.props.onGetuserLikes(userId);\n    }, 10);\n    setTimeout(() => {\n      let data = {\n        id: userAction + userId,\n        title: \"\",\n        fullname: \"\",\n        msg: \"\",\n        likerId: userAction,\n        likedId: userId,\n        time: Moment()\n      };\n      console.log(this.state.countDislikes, this.state.dislikes);\n      if (this.state.countDislikes < this.state.dislikes) if (state === 1) {\n        data.title = \"dislike\";\n        data.msg = \" disliked your profile\";\n        this.state.socket.emit('likeUser', data);\n      }\n      if (this.state.countLikes < this.state.likes) if (state === 0) {\n        data.msg = \" liked your profile\";\n        data.title = \"like\";\n        this.state.socket.emit('likeUser', data);\n      }\n      let init = this.state.likes;\n      let initDislike = this.state.dislikes;\n      this.setState({\n        countLikes: init,\n        countDislikes: initDislike\n      });\n    }, 320);\n  }\n\n  getProfilePicture(pictures, state) {\n    let pics = [];\n    let i = 0;\n\n    while (i < pictures.length) {\n      if (pictures[i].state === state) pics.push(pictures[i].path);\n      i++;\n    }\n\n    return pics;\n  }\n\n  initProfileInformation(data) {\n    let userInfo = data.info;\n    let profilePhoto = this.getProfilePicture(data.pictures, 1);\n    let photoes = this.getProfilePicture(data.pictures, 0);\n    let userInterests = data.tags;\n    this.setState({\n      firstname: userInfo.firstname,\n      psudonym: userInfo.pseudo,\n      lastname: userInfo.lastname,\n      oldProfilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n      profilePhoto: \"\",\n      email: userInfo.email,\n      online: userInfo.online,\n      updatedAt: userInfo.updatedAt,\n      age: userInfo.age,\n      oldMultiPhotos: photoes,\n      multiPhotos: [],\n      selectedOption: userInterests,\n      SexualOrientation: userInfo.sexual_orientation,\n      ProfileCompletion: userInfo.profile_completion,\n      gender: userInfo.gender,\n      location: userInfo.localisation,\n      Fame: userInfo.fame,\n      Bibliography: userInfo.bio\n    });\n  }\n\n  initInterestArray(interests) {\n    this.setState({\n      interestsArray: interests\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.getUserLikes.data !== undefined) this.setState({\n      likes: nextProps.getUserLikes.data.likes,\n      dislikes: nextProps.getUserLikes.data.dislikes\n    });\n    if (nextProps.getProfileInfo.data !== undefined) this.initProfileInformation(nextProps.getProfileInfo.data);\n    if (nextProps.getUserInterests !== undefined && nextProps.getUserInterests.code === 200) this.initInterestArray(nextProps.getUserInterests.data);\n    if (nextProps.blockUser !== undefined && nextProps.blockUser.code === 200) customNotification.fireNotification(\"success\", nextProps.blockUser.msg);\n    if (nextProps.reportUser !== undefined && nextProps.reportUser.code === 200) customNotification.fireNotification(\"success\", nextProps.reportUser.msg);\n  }\n\n  async UNSAFE_componentWillMount() {\n    let userId = this.props.match.params.id;\n    await this.props.onGetUserInfo(userId);\n    await this.props.onGetUserIntrests(userId);\n    await this.props.onGetuserLikes(userId);\n    await this.props.onVisitThisUser(userId);\n    let userAction = localStorage.getItem(\"userId\");\n    setTimeout(() => {\n      let likes = this.state.likes;\n      let dislike = this.state.dislikes;\n      this.setState({\n        countLikes: likes,\n        countDislikes: dislike\n      });\n      let data = {\n        id: userAction + userId,\n        title: \"visit\",\n        fullname: \"\",\n        msg: \" has visited your profile\",\n        likerId: userAction,\n        likedId: userId,\n        time: Moment()\n      };\n      this.state.socket.emit('likeUser', data);\n    }, 300);\n  }\n\n  componentWillUnmount() {\n    this.state.socket.disconnect(true);\n  }\n\n  componentDidMount() {\n    let room = localStorage.getItem(\"userId\");\n    this.state.socket.connect(true);\n    this.state.socket.emit('join', room);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"content-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"content-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), React.createElement(\"ol\", {\n      className: \"breadcrumb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), \" Home\")))), React.createElement(\"section\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box box-primary\",\n      id: \"fixMarginTop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box-body box-profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, this.state.oldProfilePhoto && this.state.profilePhoto === \"\" ? React.createElement(\"img\", {\n      className: \"profile-user-img img-responsive img-circle\",\n      src: this.state.oldProfilePhoto.toString().substring(0, 4) !== 'http' ? process.env.REACT_APP_API_URL + \"/\" + this.state.oldProfilePhoto : this.state.oldProfilePhoto,\n      alt: \"pic holder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }) : \"\", React.createElement(\"h3\", {\n      className: \"profile-username text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, this.state.firstname, \" \", this.state.lastname), React.createElement(\"h5\", {\n      style: {\n        'fontSize': '16px'\n      },\n      className: \"text-muted text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, this.state.online === 0 ? \"Last login : \" + Moment().format('ll', this.state.updatedAt) : \"this user is online\"), React.createElement(\"h5\", {\n      style: {\n        'fontSize': '12px'\n      },\n      className: \"text-muted text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, this.state.online === 0 ? Moment(this.state.updatedAt).fromNow() : \"\"), React.createElement(\"ul\", {\n      className: \"list-group list-group-unbordered text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: e => {\n        this.handlelikes(e, 0);\n      },\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, \"Like \", this.state.likes), React.createElement(\"button\", {\n      onClick: e => {\n        this.handlelikes(e, 1);\n      },\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, \"Dislike \", this.state.dislikes), React.createElement(\"button\", {\n      onClick: e => {\n        this.handleBlock(e);\n      },\n      className: \"btn btn-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \"Block\"), React.createElement(\"button\", {\n      onClick: e => {\n        this.handleReport(e);\n      },\n      className: \"btn btn-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, \"Report\"))))), React.createElement(\"div\", {\n      className: \"box box-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box-header with-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"box-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, \"About Me\")), React.createElement(\"div\", {\n      className: \"box-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }), \" Pseudo : \", this.state.psudonym), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }), \" Age : \", this.state.age), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }), \" Gender : \", this.state.gender), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }), \" Location : \", this.state.location), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }), \" SexualOrientation : \", this.state.SexualOrientation), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }), \" Profile completion : \", this.state.ProfileCompletion), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }), \" Fame : \", this.state.Fame), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }), \" Interests :\"), this.state.selectedOption ? this.state.selectedOption.map((hobi, i) => {\n      return React.createElement(\"p\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, hobi.label);\n    }) : \"\", React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \" margin-r-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }), \" Images :\"), React.createElement(\"div\", {\n      className: \"input-group image-preview col-md-10 col-md-offset-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, this.state.oldMultiPhotos && this.state.multiPhotos.length === 0 ? this.state.oldMultiPhotos.map((oldProfilePhoto, index) => {\n      return React.createElement(\"img\", {\n        key: index,\n        style: {\n          position: 'relative',\n          float: 'left',\n          width: '200px'\n        },\n        className: \"img-responsive center-block\",\n        src: oldProfilePhoto.indexOf(\"http\") !== 1 ? process.env.REACT_APP_API_URL + \"/\" + oldProfilePhoto : oldProfilePhoto,\n        alt: \"pic holder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      });\n    }) : \"\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }))))))), React.createElement(Sidebar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst state = (state, ownProps = {}) => {\n  return {\n    reportUser: state.reportUser.reportUser,\n    blockUser: state.blockUser.blockUser,\n    getUserLikes: state.getUserLikes.getUserLikes,\n    location: state.location,\n    getUserInterests: state.getUserInterests.getUserInterests,\n    getProfileInfo: state.getProfileInfo.getProfileInfo\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    navigateTo: location => {\n      dispatch(push(location));\n    },\n    onGetUserInfo: userId => dispatch(GetUserInfo(userId)),\n    onGetUserIntrests: userId => dispatch(GetUserIntrests(userId)),\n    onGetuserLikes: userId => dispatch(GetuserLikes(userId)),\n    onPutUpdateUserLikes: (userId, cheker) => dispatch(PutUpdateUserLikes(userId, cheker)),\n    onBlockThisUser: blocked_userId => dispatch(BlockThisUser(blocked_userId)),\n    onVisitThisUser: visited_userId => dispatch(VisitThisUser(visited_userId)),\n    onreportThisUser: reported_userId => dispatch(reportThisUser(reported_userId))\n  };\n};\n\nexport default connect(state, mapDispatchToProps)(ProfileDetails);","map":{"version":3,"sources":["/usr/src/app/src/components/pages/ProfileDetail/ProfileDetail.js"],"names":["React","Header","Sidebar","Footer","connect","push","GetUserInfo","GetUserIntrests","GetuserLikes","PutUpdateUserLikes","BlockThisUser","VisitThisUser","Moment","reportThisUser","ToastContainer","io","customNotification","require","ProfileDetails","Component","constructor","props","state","firstname","likes","dislikes","singleHObbi","psudonym","socket","process","env","REACT_APP_API_URL","lastname","showAddHobi","countLikes","countdisLikes","profilePhoto","email","oldMultiPhotos","oldProfilePhoto","age","multiPhotos","Password","interestsArray","SexualOrientation","ProfileCompletion","online","updatedAt","gender","location","Fame","Bibliography","selectedOption","handlelikes","bind","handleBlock","handleReport","e","preventDefault","userId","match","params","id","onBlockThisUser","userAction","localStorage","getItem","setTimeout","data","title","fullname","msg","likerId","likedId","time","emit","onreportThisUser","onPutUpdateUserLikes","onGetuserLikes","console","log","countDislikes","init","initDislike","setState","getProfilePicture","pictures","pics","i","length","path","initProfileInformation","userInfo","info","photoes","userInterests","tags","pseudo","sexual_orientation","profile_completion","localisation","fame","bio","initInterestArray","interests","UNSAFE_componentWillReceiveProps","nextProps","getUserLikes","undefined","getProfileInfo","getUserInterests","code","blockUser","fireNotification","reportUser","UNSAFE_componentWillMount","onGetUserInfo","onGetUserIntrests","onVisitThisUser","dislike","componentWillUnmount","disconnect","componentDidMount","room","render","toString","substring","format","fromNow","map","hobi","label","index","position","float","width","indexOf","ownProps","mapDispatchToProps","dispatch","navigateTo","cheker","blocked_userId","visited_userId","reported_userId"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"../../common/Header\";\nimport Sidebar from \"../../common/SideBar\";\nimport Footer from \"../../common/Footer\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetUserInfo } from '../../../store/actions/UsersActions/FetchUserInfoAction';\nimport { GetUserIntrests } from '../../../store/actions/intrestsActions/GetAllInterestsAction';\nimport { GetuserLikes } from '../../../store/actions/UsersActions/GetUserlikesDislikesAction';\nimport { PutUpdateUserLikes } from '../../../store/actions/UsersActions/UpdateUserLikeDislikeAction';\nimport { BlockThisUser } from \"../../../store/actions/UsersActions/BlockUserAction\";\nimport { VisitThisUser } from '../../../store/actions/UsersActions/VisitUserAction';\nimport Moment from 'moment';\nimport { reportThisUser } from '../../../store/actions/UsersActions/ReportUserAction';\nimport { ToastContainer } from 'react-toastify';\nimport io from 'socket.io-client';\nconst customNotification = require('../utils/notification');\n\nclass ProfileDetails extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            firstname: \"\",\n            likes: 0,\n            dislikes: 0,\n            singleHObbi: \"\",\n            psudonym: \"\",\n            socket: io(process.env.REACT_APP_API_URL),\n            lastname: \"\",\n            showAddHobi: false,\n            countLikes: 0,\n            countdisLikes: 0,\n            profilePhoto: \"\",\n            email: \"\",\n            oldMultiPhotos: [],\n            oldProfilePhoto: \"\",\n            age: \"\",\n            multiPhotos: [],\n            Password: \"\",\n            interestsArray: [],\n            SexualOrientation: \"\",\n            ProfileCompletion: \"\",\n            online: \"\",\n            updatedAt: \"\",\n            gender: \"\",\n            location: \"\",\n            Fame: \"\",\n            Bibliography: \"\",\n            selectedOption: [],\n        };\n\n        this.handlelikes = this.handlelikes.bind(this);\n        this.handleBlock = this.handleBlock.bind(this);\n        this.handleReport = this.handleReport.bind(this);\n    }\n\n    async handleBlock(e) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        await this.props.onBlockThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"block\",\n                fullname: \"\",\n                msg: \" blocked your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n            this.state.socket.emit('likeUser', data)\n        }, 320)\n    }\n\n    async handleReport(e) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        await this.props.onreportThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"report\",\n                fullname: \"\",\n                msg: \" reported your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n            this.state.socket.emit('likeUser', data)\n        }, 320)\n    }\n\n    async handlelikes(e, state) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        let userAction = localStorage.getItem(\"userId\");\n\n        await this.props.onPutUpdateUserLikes(userId, state);\n        setTimeout(async () => {\n            await this.props.onGetuserLikes(userId);\n        }, 10)\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"\",\n                fullname: \"\",\n                msg: \"\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n\n            console.log(this.state.countDislikes, this.state.dislikes)\n            if (this.state.countDislikes < this.state.dislikes)\n                if (state === 1) {\n                    data.title = \"dislike\";\n                    data.msg = \" disliked your profile\";\n                    this.state.socket.emit('likeUser', data)\n                }\n\n            if (this.state.countLikes < this.state.likes)\n                if (state === 0) {\n                    data.msg = \" liked your profile\";\n                    data.title = \"like\";\n                    this.state.socket.emit('likeUser', data)\n                }\n\n            let init = this.state.likes;\n            let initDislike = this.state.dislikes;\n            this.setState({\n                countLikes: init,\n                countDislikes: initDislike\n            })\n        }, 320)\n    }\n\n\n    getProfilePicture(pictures, state) {\n        let pics = [];\n        let i = 0;\n        while (i < pictures.length) {\n            if (pictures[i].state === state)\n                pics.push(pictures[i].path)\n            i++;\n        }\n\n        return pics;\n    }\n\n    initProfileInformation(data) {\n        let userInfo = data.info;\n        let profilePhoto = this.getProfilePicture(data.pictures, 1);\n        let photoes = this.getProfilePicture(data.pictures, 0)\n\n        let userInterests = data.tags;\n\n        this.setState({\n            firstname: userInfo.firstname,\n            psudonym: userInfo.pseudo,\n            lastname: userInfo.lastname,\n            oldProfilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n            profilePhoto: \"\",\n            email: userInfo.email,\n            online: userInfo.online,\n            updatedAt: userInfo.updatedAt,\n            age: userInfo.age,\n            oldMultiPhotos: photoes,\n            multiPhotos: [],\n            selectedOption: userInterests,\n            SexualOrientation: userInfo.sexual_orientation,\n            ProfileCompletion: userInfo.profile_completion,\n            gender: userInfo.gender,\n            location: userInfo.localisation,\n            Fame: userInfo.fame,\n            Bibliography: userInfo.bio,\n        })\n    }\n\n    initInterestArray(interests) {\n        this.setState({\n            interestsArray: interests\n        })\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        if (nextProps.getUserLikes.data !== undefined)\n            this.setState({\n                likes: nextProps.getUserLikes.data.likes,\n                dislikes: nextProps.getUserLikes.data.dislikes\n            })\n        if (nextProps.getProfileInfo.data !== undefined)\n            this.initProfileInformation(nextProps.getProfileInfo.data);\n        if (nextProps.getUserInterests !== undefined && nextProps.getUserInterests.code === 200)\n            this.initInterestArray(nextProps.getUserInterests.data)\n        if (nextProps.blockUser !== undefined && nextProps.blockUser.code === 200)\n            customNotification.fireNotification(\"success\", nextProps.blockUser.msg)\n        if (nextProps.reportUser !== undefined && nextProps.reportUser.code === 200)\n            customNotification.fireNotification(\"success\", nextProps.reportUser.msg)\n    }\n\n\n    async UNSAFE_componentWillMount() {\n        let userId = this.props.match.params.id;\n        await this.props.onGetUserInfo(userId);\n        await this.props.onGetUserIntrests(userId);\n        await this.props.onGetuserLikes(userId);\n        await this.props.onVisitThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let likes = this.state.likes;\n            let dislike = this.state.dislikes;\n            this.setState({\n                countLikes: likes,\n                countDislikes: dislike\n            })\n\n            let data = {\n                id: userAction + userId,\n                title: \"visit\",\n                fullname: \"\",\n                msg: \" has visited your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n\n            this.state.socket.emit('likeUser', data)\n        }, 300)\n    }\n\n    componentWillUnmount() {\n        this.state.socket.disconnect(true);\n    }\n\n    componentDidMount() {\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.connect(true);\n        this.state.socket.emit('join', room);\n    }\n\n    render() {\n\n\n        return (\n            <div>\n                <Header />\n                <ToastContainer />\n                <div className=\"content-wrapper\" >\n                    <section className=\"content-header\" >\n                        <br></br>\n                        <ol className=\"breadcrumb\">\n                            <li>\n                                <a href=\"/\">\n                                    <i className=\"fa fa-dashboard\"></i> Home\n                </a>\n                            </li>\n                        </ol>\n                    </section>\n\n                    <section className=\"content\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <div className=\"box box-primary\" id=\"fixMarginTop\">\n                                    <div className=\"box-body box-profile\">\n                                        {this.state.oldProfilePhoto && this.state.profilePhoto === \"\" ?\n                                            <img\n                                                className=\"profile-user-img img-responsive img-circle\"\n\n                                                src={this.state.oldProfilePhoto.toString().substring(0, 4) !== 'http' ?\n                                                    process.env.REACT_APP_API_URL +\n                                                    \"/\" +\n                                                    this.state.oldProfilePhoto :\n                                                    this.state.oldProfilePhoto\n                                                }\n                                                alt=\"pic holder\"\n                                            />\n                                            : \"\"}\n\n\n                                        <h3 className=\"profile-username text-center\">\n                                            {this.state.firstname}{\" \"}\n                                            {this.state.lastname}\n                                        </h3>\n\n                                        <h5 style={{ 'fontSize': '16px' }} className=\"text-muted text-center\">\n                                            {this.state.online === 0 ?\n                                                \"Last login : \" +\n                                                Moment().format('ll', this.state.updatedAt)\n                                                :\n                                                \"this user is online\"}\n                                        </h5>\n                                        <h5 style={{ 'fontSize': '12px' }} className=\"text-muted text-center\">\n                                            {this.state.online === 0 ?\n                                                Moment(this.state.updatedAt).fromNow()\n                                                :\n                                                \"\"}\n                                        </h5>\n\n                                        <ul className=\"list-group list-group-unbordered text-center\">\n                                            <li className=\"list-group-item\">\n                                                <button onClick={(e) => { this.handlelikes(e, 0) }} className=\"btn btn-primary\">Like {this.state.likes}</button>\n                                                <button onClick={(e) => { this.handlelikes(e, 1) }} className=\"btn btn-warning\">Dislike {this.state.dislikes}</button>\n                                                <button onClick={(e) => { this.handleBlock(e) }} className=\"btn btn-danger\">Block</button>\n                                                <button onClick={(e) => { this.handleReport(e) }} className=\"btn btn-danger\">Report</button>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n\n                                <div className=\"box box-primary\">\n                                    <div className=\"box-header with-border\">\n                                        <h3 className=\"box-title\">About Me</h3>\n                                    </div>\n                                    <div className=\"box-body\">\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Pseudo : {this.state.psudonym}\n                                        </strong>\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Age : {this.state.age}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Gender : {this.state.gender}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Location : {this.state.location}\n                                        </strong>\n\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> SexualOrientation : {this.state.SexualOrientation}\n                                        </strong>\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Profile completion : {this.state.ProfileCompletion}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Fame : {this.state.Fame}\n                                        </strong>\n\n                                        <hr></hr>\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Interests :\n                                        </strong>\n\n                                        {this.state.selectedOption ? this.state.selectedOption.map((hobi, i) => {\n                                            return <p key={i}>{hobi.label}</p>\n                                        }) : \"\"}\n\n                                        <hr></hr>\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Images :\n                                        </strong>\n\n                                        <div className=\"input-group image-preview col-md-10 col-md-offset-2\">\n                                            {this.state.oldMultiPhotos && this.state.multiPhotos.length === 0 ?\n                                                this.state.oldMultiPhotos.map((oldProfilePhoto, index) => {\n                                                    return (<img key={index} style={{ position: 'relative', float: 'left', width: '200px' }}\n                                                        className=\"img-responsive center-block\"\n                                                        src={oldProfilePhoto.indexOf(\"http\") !== 1 ?\n                                                            process.env.REACT_APP_API_URL +\n                                                            \"/\" +\n                                                            oldProfilePhoto : oldProfilePhoto\n                                                        } alt=\"pic holder\"\n                                                    />)\n                                                }) : \"\"}\n                                        </div>\n                                        <div>\n                                            {/* <p style={{ height: '140px', lineHeight: '20px', overflow: 'hidden' }}>\n                                                {this.state.note}\n                                            </p> */}\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <Sidebar />\n                <Footer />\n            </div>\n        );\n    }\n}\n\nconst state = (state, ownProps = {}) => {\n    return {\n        reportUser: state.reportUser.reportUser,\n        blockUser: state.blockUser.blockUser,\n        getUserLikes: state.getUserLikes.getUserLikes,\n        location: state.location,\n        getUserInterests: state.getUserInterests.getUserInterests,\n        getProfileInfo: state.getProfileInfo.getProfileInfo,\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        navigateTo: (location) => {\n            dispatch(push(location));\n        },\n        onGetUserInfo: (userId) => dispatch(GetUserInfo(userId)),\n        onGetUserIntrests: (userId) => dispatch(GetUserIntrests(userId)),\n        onGetuserLikes: (userId) => dispatch(GetuserLikes(userId)),\n        onPutUpdateUserLikes: (userId, cheker) => dispatch(PutUpdateUserLikes(userId, cheker)),\n        onBlockThisUser: (blocked_userId) => dispatch(BlockThisUser(blocked_userId)),\n        onVisitThisUser: (visited_userId) => dispatch(VisitThisUser(visited_userId)),\n        onreportThisUser: (reported_userId) => dispatch(reportThisUser(reported_userId))\n    }\n};\n\nexport default connect(\n    state,\n    mapDispatchToProps\n)(ProfileDetails);\n"]},"metadata":{},"sourceType":"module"}