{"ast":null,"code":"import _regeneratorRuntime from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Header from'../../common/Header';import Sidebar from'../../common/SideBar';import Footer from'../../common/Footer';import{connect}from\"react-redux\";import{push}from\"react-router-redux\";import'./chat.css';import{GetuserChatContact}from'../../../store/actions/UsersActions/GetUserChatContactAction';import Moment from'moment';import{GetCurrentUserInfo}from'../../../store/actions/UsersActions/FetchCurrentUserInfoAction';import{saveUserChatAction}from'../../../store/actions/UsersActions/SaveUserchatMsgAction';import{GetuserChatMsg}from'../../../store/actions/UsersActions/GetUserChatMessagesAction';import io from'socket.io-client';var Chat=/*#__PURE__*/function(_React$Component){_inherits(Chat,_React$Component);function Chat(props){var _this;_classCallCheck(this,Chat);_this=_possibleConstructorReturn(this,_getPrototypeOf(Chat).call(this,props));_this.state={socket:io(process.env.REACT_APP_API_URL),firstname:\"\",lastname:\"\",profilePhoto:\"\",msgContent:\"\",allUserChatContact:[],messagesInfo:[],initChatMessage:React.createElement(\"li\",{className:\"left clearfix\"},React.createElement(\"span\",{className:\"chat-img1 pull-left\"},React.createElement(\"img\",{src:\"https://lh6.googleusercontent.com/-y-MY2satK-E/AAAAAAAAAAI/AAAAAAAAAJU/ER_hFddBheQ/photo.jpg\",alt:\"User Avatar\",className:\"img-circle\"})),React.createElement(\"div\",{className:\"chat-body1 clearfix\"},React.createElement(\"p\",null,\"Hello I am a robot. Welcome to your chat box choose a user to start chatting.\"),React.createElement(\"div\",{className:\"chat_time pull-right\"},\"09:40PM\")))};_this.sendMessageToUser=_this.sendMessageToUser.bind(_assertThisInitialized(_this));_this.selectChatContact=_this.selectChatContact.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Chat,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var room=localStorage.getItem(\"userId\");this.state.socket.connect(true);this.state.socket.emit('join',room);this.state.socket.on(\"send-new-msg\",function(msg){if(_this2.state.messagesInfo.dest_userId!==undefined){var allMsg=_this2.state.messagesInfo;allMsg.messages.push(msg);_this2.setState({messagesInfo:allMsg});// var elmnt = document.getElementById(\"content\");\n// elmnt.scrollIntoView();   \n}});}},{key:\"handleChange\",value:function handleChange(event){event.preventDefault();var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;this.setState(_defineProperty({},name,value));}},{key:\"sendMessageToUser\",value:function sendMessageToUser(e){var _this3=this;e.preventDefault();var Allmessages=[];var socketMsg={};if(this.state.messagesInfo.length!==0&&this.state.messagesInfo.messages){Allmessages=this.state.messagesInfo;socketMsg={pos:\"left\",photo:this.state.profilePhoto,msgData:this.state.msgContent,data:Moment()};Allmessages.messages.push({pos:\"right\",photo:this.state.profilePhoto,msgData:this.state.msgContent,data:Moment()});this.setState({messagesInfo:Allmessages});this.props.onsaveUserChatAction(Allmessages);setTimeout(function(){_this3.state.socket.emit('new-msg',{msg:socketMsg,room:_this3.state.messagesInfo.dest_userId});_this3.setState({msgContent:\"\"});var data={id:parseInt(_this3.state.messagesInfo.source_userId)+parseInt(_this3.state.messagesInfo.dest_userId),title:\"message\",fullname:\"\",msg:\" messaged you on chatApp \",likerId:parseInt(_this3.state.messagesInfo.source_userId),likedId:parseInt(_this3.state.messagesInfo.dest_userId),time:Moment()};_this3.state.socket.emit('likeUser',data);},200);}else{console.log(\"Please choose a user to chat with !\");}// var elmnt = document.getElementById(\"content\");\n// elmnt.scrollIntoView();\n}},{key:\"UNSAFE_componentWillMount\",value:function(){var _UNSAFE_componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userId=localStorage.getItem(\"userId\");_context.next=3;return this.props.onGetCurrentUserInfo(userId);case 3:_context.next=5;return this.props.onGetuserChatContact();case 5:case\"end\":return _context.stop();}}},_callee,this);}));function UNSAFE_componentWillMount(){return _UNSAFE_componentWillMount.apply(this,arguments);}return UNSAFE_componentWillMount;}()},{key:\"selectChatContact\",value:function(){var _selectChatContact=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,user){var userId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();userId=localStorage.getItem(\"userId\");_context2.next=4;return this.props.onGetuserChatMsg(user.userId);case 4:// Get all user messages sorted by date\n// init user objs\nthis.setState({messagesInfo:{dest_userId:user.userId,source_userId:userId,dest_fullname:user.fullname,dest_photo:user.profilePhoto,messages:[]}});setTimeout(function(){// var elmnt = document.getElementById(\"content\");\n// elmnt.scrollIntoView();\n},20);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function selectChatContact(_x,_x2){return _selectChatContact.apply(this,arguments);}return selectChatContact;}()},{key:\"getProfilePicture\",value:function getProfilePicture(pictures,state){var pics=[];var i=0;while(i<pictures.length){if(pictures[i].state===state)pics.push(pictures[i].path);i++;}return pics;}},{key:\"initProfileInformation\",value:function initProfileInformation(data){var userInfo=data.info;var profilePhoto=this.getProfilePicture(data.pictures,1);this.setState({firstname:userInfo.firstname,lastname:userInfo.lastname,profilePhoto:profilePhoto.length>0?profilePhoto:\"\"});}},{key:\"initMegList\",value:function initMegList(msgs){var _this4=this;if(msgs&&msgs.length>0){var msgsList=[];msgsList=msgs.map(function(msg){return{pos:msg.source_user_id===parseInt(_this4.state.messagesInfo.source_userId)?\"right\":\"left\",photo:msg.source_user_id===parseInt(_this4.state.messagesInfo.source_userId)?_this4.state.profilePhoto:_this4.state.messagesInfo.dest_photo,msgData:msg.message_text,date:msg.createdAt};});var msgInfo=this.state.messagesInfo;msgInfo.messages=msgsList;this.setState({messagesInfo:msgInfo});}}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.getContactChat!==\"\"&&nextProps.getContactChat.code===200){this.setState({allUserChatContact:nextProps.getContactChat.data});}if(nextProps.getUserChatMsg!==\"\"&&nextProps.getUserChatMsg.code===200){this.initMegList(nextProps.getUserChatMsg.data);}if(nextProps.getCurrentProfileInfo.data)this.initProfileInformation(nextProps.getCurrentProfileInfo.data);}},{key:\"render\",value:function render(){var _this5=this;return React.createElement(\"div\",null,React.createElement(Header,null),React.createElement(Sidebar,null),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"content-wrapper\"},React.createElement(\"section\",{className:\"content\"},React.createElement(\"section\",{className:\"content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"div\",{className:\"box box-primary\",id:\"fixMarginTop\"},React.createElement(\"div\",{className:\"box-header with-border\"},React.createElement(\"h3\",{className:\"box-title\"},\"Chat\"),React.createElement(\"div\",{className:\"box-tools pull-right\"},React.createElement(\"button\",{type:\"button\",className:\"btn btn-box-tool\",\"data-widget\":\"collapse\"},React.createElement(\"i\",{className:\"fa fa-minus\"})),React.createElement(\"button\",{type:\"button\",className:\"btn btn-box-tool\",\"data-widget\":\"remove\"},React.createElement(\"i\",{className:\"fa fa-times\"})))),React.createElement(\"div\",{className:\"box-body\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"div\",{style:{'height':'100px'}},React.createElement(\"div\",null,React.createElement(\"div\",{className:\"col-sm-3 chat_sidebar\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{id:\"custom-search-input\"},React.createElement(\"div\",{className:\"input-group col-md-12\"},React.createElement(\"input\",{type:\"text\",className:\"  search-query form-control\",placeholder:\"Conversation\"}),React.createElement(\"button\",{className:\"btn btn-danger\",type:\"button\"},React.createElement(\"span\",{className:\" glyphicon glyphicon-search\"})))),React.createElement(\"div\",{className:\"member_list\"},React.createElement(\"ul\",{className:\"list-unstyled\"},this.state.allUserChatContact?this.state.allUserChatContact.map(function(user,i){return user.profilePhoto!==\"\"?React.createElement(\"li\",{key:i,onClick:function onClick(e){_this5.selectChatContact(e,user);},className:\"left clearfix\"},React.createElement(\"span\",{className:\"chat-img pull-left\"},React.createElement(\"img\",{src:process.env.REACT_APP_API_URL+\"/\"+user.profilePhoto,alt:\"User Avatar\",className:\"img-circle\"})),React.createElement(\"div\",{className:\"chat-body clearfix\"},React.createElement(\"div\",{className:\"header_sec\"},React.createElement(\"strong\",{className:\"primary-font\"},user.fullname)),React.createElement(\"div\",{className:\"contact_sec\"}))):\"\";}):\"\")))),React.createElement(\"div\",{className:\"col-sm-9 message_section\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"new_message_head\"},React.createElement(\"div\",{className:\"pull-left\"},React.createElement(\"button\",null,React.createElement(\"i\",{className:\"fa fa-plus-square-o\",\"aria-hidden\":\"true\"}),\" New Message\")),React.createElement(\"div\",{className:\"pull-right\"},React.createElement(\"div\",{className:\"dropdown\"},React.createElement(\"button\",{className:\"dropdown-toggle\",type:\"button\",id:\"dropdownMenu1\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},React.createElement(\"i\",{className:\"fa fa-cogs\",\"aria-hidden\":\"true\"}),\"  Setting\",React.createElement(\"span\",{className:\"caret\"})),React.createElement(\"ul\",{className:\"dropdown-menu dropdown-menu-right\",\"aria-labelledby\":\"dropdownMenu1\"},React.createElement(\"li\",null,React.createElement(\"a\",{href:\"#\"},\"Action\")),React.createElement(\"li\",null,React.createElement(\"a\",{href:\"#\"},\"Profile\")),React.createElement(\"li\",null,React.createElement(\"a\",{href:\"#\"},\"Logout\")))))),React.createElement(\"div\",{className:\"chat_area\"},React.createElement(\"ul\",{className:\"list-unstyled\"},this.state.messagesInfo.length===0?this.state.initChatMessage:\"\",this.state.messagesInfo.length!==0&&this.state.messagesInfo.messages.length===0?React.createElement(\"li\",{className:\"left clearfix\"},React.createElement(\"div\",{className:\"chat-body1 clearfix\"},React.createElement(\"p\",null,\"Now chatting with \",React.createElement(\"b\",null,this.state.messagesInfo.dest_fullname)),React.createElement(\"div\",{className:\"chat_time pull-right\"},\"09:40PM\"))):\"\",this.state.messagesInfo.length!==0&&this.state.messagesInfo.messages.length>0?this.state.messagesInfo.messages.map(function(msg,i){return React.createElement(\"li\",{key:i,className:\"left clearfix admin_chat\"},React.createElement(\"span\",{className:'chat-img1 pull-'+msg.pos},React.createElement(\"img\",{src:process.env.REACT_APP_API_URL+\"/\"+msg.photo,alt:\"User Avatar\",className:\"img-circle\"})),React.createElement(\"div\",{className:\"chat-body1 clearfix\"},React.createElement(\"p\",null,msg.msgData),React.createElement(\"div\",{className:\"chat_time pull-left\"},Moment(msg.date).fromNow())));}):\"\",React.createElement(\"li\",{style:{'marginBottom':'1.5vw'},id:\"content\"}))),React.createElement(\"div\",{className:\"message_write\"},React.createElement(\"textarea\",{className:\"form-control\",name:\"msgContent\",value:this.state.msgContent,onChange:this.handleChange,placeholder:\"type a message\"}),React.createElement(\"div\",{className:\"clearfix\"}),React.createElement(\"div\",{onClick:function onClick(e){_this5.sendMessageToUser(e);},className:\"chat_bottom\"},React.createElement(\"a\",{href:\"#\",className:\"pull-left btn btn-success\"},\"Send\"))))))))))))))))),React.createElement(Footer,null));}}]);return Chat;}(React.Component);var state=function state(_state){var ownProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{getUserChatMsg:_state.getUserChatMsg.getUserChatMsg,getCurrentProfileInfo:_state.getCurrentProfileInfo.getCurrentProfileInfo,getContactChat:_state.getContactChat.getContactChat,location:_state.location};};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){return{navigateTo:function navigateTo(location){dispatch(push(location));},onGetuserChatContact:function onGetuserChatContact(){return dispatch(GetuserChatContact());},onGetCurrentUserInfo:function onGetCurrentUserInfo(userId){return dispatch(GetCurrentUserInfo(userId));},onsaveUserChatAction:function onsaveUserChatAction(data){return dispatch(saveUserChatAction(data));},onGetuserChatMsg:function onGetuserChatMsg(dest_userId){return dispatch(GetuserChatMsg(dest_userId));}};};export default connect(state,mapDispatchToProps)(Chat);","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/components/pages/Chat/chat.js"],"names":["React","Header","Sidebar","Footer","connect","push","GetuserChatContact","Moment","GetCurrentUserInfo","saveUserChatAction","GetuserChatMsg","io","Chat","props","state","socket","process","env","REACT_APP_API_URL","firstname","lastname","profilePhoto","msgContent","allUserChatContact","messagesInfo","initChatMessage","sendMessageToUser","bind","selectChatContact","handleChange","room","localStorage","getItem","emit","on","msg","dest_userId","undefined","allMsg","messages","setState","event","preventDefault","target","value","type","checked","name","e","Allmessages","socketMsg","length","pos","photo","msgData","data","onsaveUserChatAction","setTimeout","id","parseInt","source_userId","title","fullname","likerId","likedId","time","console","log","userId","onGetCurrentUserInfo","onGetuserChatContact","user","onGetuserChatMsg","dest_fullname","dest_photo","pictures","pics","i","path","userInfo","info","getProfilePicture","msgs","msgsList","map","source_user_id","message_text","date","createdAt","msgInfo","nextProps","getContactChat","code","getUserChatMsg","initMegList","getCurrentProfileInfo","initProfileInformation","fromNow","Component","ownProps","location","mapDispatchToProps","dispatch","navigateTo"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from '../../common/Header';\nimport Sidebar from '../../common/SideBar';\nimport Footer from '../../common/Footer';\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport './chat.css';\nimport { GetuserChatContact } from '../../../store/actions/UsersActions/GetUserChatContactAction';\nimport Moment from 'moment';\nimport { GetCurrentUserInfo } from '../../../store/actions/UsersActions/FetchCurrentUserInfoAction';\nimport { saveUserChatAction } from '../../../store/actions/UsersActions/SaveUserchatMsgAction';\nimport { GetuserChatMsg } from '../../../store/actions/UsersActions/GetUserChatMessagesAction';\nimport io from 'socket.io-client';\n\n\nclass Chat extends React.Component {\n   constructor(props) {\n      super(props);\n      this.state = {\n         socket: io(process.env.REACT_APP_API_URL),\n         firstname: \"\",\n         lastname: \"\",\n         profilePhoto: \"\",\n         msgContent: \"\",\n         allUserChatContact: [],\n         messagesInfo: [],\n         initChatMessage: <li className=\"left clearfix\">\n            <span className=\"chat-img1 pull-left\">\n               <img src=\"https://lh6.googleusercontent.com/-y-MY2satK-E/AAAAAAAAAAI/AAAAAAAAAJU/ER_hFddBheQ/photo.jpg\" alt=\"User Avatar\" className=\"img-circle\" />\n            </span>\n            <div className=\"chat-body1 clearfix\">\n               <p>Hello I am a robot. Welcome to your chat box choose a user to start chatting.</p>\n               <div className=\"chat_time pull-right\">09:40PM</div>\n            </div>\n         </li>\n      }\n\n      this.sendMessageToUser = this.sendMessageToUser.bind(this);\n      this.selectChatContact = this.selectChatContact.bind(this);\n      this.handleChange = this.handleChange.bind(this);\n   }\n\n   componentDidMount() {\n      let room = localStorage.getItem(\"userId\");\n      this.state.socket.connect(true);\n      this.state.socket.emit('join', room);\n      this.state.socket.on(\"send-new-msg\", (msg) => {\n         if (this.state.messagesInfo.dest_userId !== undefined) {\n            let allMsg = this.state.messagesInfo;\n            allMsg.messages.push(msg);\n            this.setState({\n               messagesInfo: allMsg\n            })\n            // var elmnt = document.getElementById(\"content\");\n            // elmnt.scrollIntoView();   \n         }\n      })\n   }\n\n   handleChange(event) {\n      event.preventDefault();\n      const target = event.target;\n      const value = target.type === 'checkbox' ? target.checked : target.value;\n      const name = target.name;\n\n      this.setState({\n         [name]: value\n      });\n\n   }\n\n   sendMessageToUser(e) {\n      e.preventDefault();\n      let Allmessages = [];\n      let socketMsg = {};\n      if (this.state.messagesInfo.length !== 0 && this.state.messagesInfo.messages) {\n         Allmessages = this.state.messagesInfo;\n         socketMsg = {\n            pos: \"left\",\n            photo: this.state.profilePhoto,\n            msgData: this.state.msgContent,\n            data: Moment()\n         };\n\n         Allmessages.messages.push({\n            pos: \"right\",\n            photo: this.state.profilePhoto,\n            msgData: this.state.msgContent,\n            data: Moment()\n         })\n         this.setState({\n            messagesInfo: Allmessages,\n         })\n         this.props.onsaveUserChatAction(Allmessages);\n         setTimeout(() => {\n            this.state.socket.emit('new-msg', { msg: socketMsg, room: this.state.messagesInfo.dest_userId })\n            this.setState({\n               msgContent: \"\"\n            })\n            let data = {\n               id: parseInt(this.state.messagesInfo.source_userId) + \n               parseInt(this.state.messagesInfo.dest_userId),\n               title: \"message\",\n               fullname: \"\",\n               msg: \" messaged you on chatApp \",\n               likerId: parseInt(this.state.messagesInfo.source_userId),\n               likedId: parseInt(this.state.messagesInfo.dest_userId),\n               time: Moment()\n           }\n           this.state.socket.emit('likeUser', data)\n         }, 200)\n      } else {\n         console.log(\"Please choose a user to chat with !\")\n      }\n\n      // var elmnt = document.getElementById(\"content\");\n      // elmnt.scrollIntoView();\n   }\n\n   async UNSAFE_componentWillMount() {\n      let userId = localStorage.getItem(\"userId\");\n      await this.props.onGetCurrentUserInfo(userId);\n      await this.props.onGetuserChatContact();\n   }\n\n   async selectChatContact(e, user) {\n      e.preventDefault();\n      let userId = localStorage.getItem(\"userId\");\n      await this.props.onGetuserChatMsg(user.userId);\n      // Get all user messages sorted by date\n      // init user objs\n      this.setState({\n         messagesInfo: {\n            dest_userId: user.userId,\n            source_userId: userId,\n            dest_fullname: user.fullname,\n            dest_photo: user.profilePhoto,\n            messages: []\n         },\n      })\n\n      setTimeout(() => {\n         // var elmnt = document.getElementById(\"content\");\n         // elmnt.scrollIntoView();\n      }, 20);\n   }\n\n   getProfilePicture(pictures, state) {\n      let pics = [];\n      let i = 0;\n      while (i < pictures.length) {\n         if (pictures[i].state === state)\n            pics.push(pictures[i].path)\n         i++;\n      }\n\n      return pics;\n   }\n\n   initProfileInformation(data) {\n      let userInfo = data.info;\n      let profilePhoto = this.getProfilePicture(data.pictures, 1);\n\n      this.setState({\n         firstname: userInfo.firstname,\n         lastname: userInfo.lastname,\n         profilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n      })\n   }\n\n   initMegList(msgs) {\n      if (msgs && msgs.length > 0) {\n         let msgsList = [];\n         msgsList = msgs.map(msg => {\n            return ({\n               pos: msg.source_user_id === parseInt(this.state.messagesInfo.source_userId)\n                  ? \"right\" : \"left\",\n               photo: msg.source_user_id === parseInt(this.state.messagesInfo.source_userId)\n                  ? this.state.profilePhoto : this.state.messagesInfo.dest_photo,\n               msgData: msg.message_text,\n               date: msg.createdAt\n            })\n         })\n\n         let msgInfo = this.state.messagesInfo;\n         msgInfo.messages = msgsList\n         this.setState({\n            messagesInfo: msgInfo\n         })\n      }\n   }\n\n\n   UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.getContactChat !== \"\" && nextProps.getContactChat.code === 200) {\n         this.setState({\n            allUserChatContact: nextProps.getContactChat.data\n         })\n      }\n      if (nextProps.getUserChatMsg !== \"\" && nextProps.getUserChatMsg.code === 200) {\n         this.initMegList(nextProps.getUserChatMsg.data);\n      }\n      if (nextProps.getCurrentProfileInfo.data)\n         this.initProfileInformation(nextProps.getCurrentProfileInfo.data);\n   }\n\n\n   render() {\n\n      return (\n         <div>\n            <Header />\n            <Sidebar />\n            <div>\n               <div className=\"content-wrapper\">\n                  <section className=\"content\">\n                     <section className=\"content\">\n\n                        <div className=\"row\">\n                           <div className=\"col-md-12\">\n                              <div className=\"box box-primary\" id=\"fixMarginTop\">\n                                 <div className=\"box-header with-border\">\n                                    <h3 className=\"box-title\">Chat</h3>\n\n                                    <div className=\"box-tools pull-right\">\n                                       <button type=\"button\" className=\"btn btn-box-tool\" data-widget=\"collapse\"><i className=\"fa fa-minus\"></i>\n                                       </button>\n                                       <button type=\"button\" className=\"btn btn-box-tool\" data-widget=\"remove\"><i className=\"fa fa-times\"></i></button>\n                                    </div>\n                                 </div>\n                                 <div className=\"box-body\">\n                                    <div className=\"row\">\n\n                                       <div className=\"col-md-12\">\n                                          <div style={{ 'height': '100px' }}>\n                                             <div>\n                                                <div className=\"col-sm-3 chat_sidebar\">\n                                                   <div className=\"row\">\n                                                      <div id=\"custom-search-input\">\n                                                         <div className=\"input-group col-md-12\">\n                                                            <input type=\"text\" className=\"  search-query form-control\" placeholder=\"Conversation\" />\n                                                            <button className=\"btn btn-danger\" type=\"button\">\n                                                               <span className=\" glyphicon glyphicon-search\"></span>\n                                                            </button>\n                                                         </div>\n                                                      </div>\n\n                                                      <div className=\"member_list\">\n                                                         <ul className=\"list-unstyled\">\n                                                            {this.state.allUserChatContact ?\n                                                               this.state.allUserChatContact.map((user, i) => {\n                                                                  return  user.profilePhoto !== \"\" ?\n                                                                  <li key={i} onClick={(e) => { this.selectChatContact(e, user) }} className=\"left clearfix\">\n                                                                  <span className=\"chat-img pull-left\">\n                                                                     <img src={\n                                                                        process.env.REACT_APP_API_URL +\n                                                                        \"/\" + user.profilePhoto\n                                                                     } alt=\"User Avatar\" className=\"img-circle\" />\n                                                                  </span>\n                                                                  <div className=\"chat-body clearfix\">\n                                                                     <div className=\"header_sec\">\n                                                                        <strong className=\"primary-font\">{user.fullname}</strong>\n                                                                        {/* <strong className=\"pull-right\"> */}\n                                                                        {/* 09:45AM</strong> */}\n                                                                     </div>\n                                                                     <div className=\"contact_sec\">\n                                                                        {/* <strong className=\"primary-font\">(123) 123-456</strong> <span className=\"badge pull-right\">3</span> */}\n                                                                     </div>\n                                                                  </div>\n                                                               </li>\n                                                                  : \"\"\n                                                               })\n                                                               : \"\"}\n\n                                                         </ul>\n                                                      </div></div>\n                                                </div>\n\n                                                <div className=\"col-sm-9 message_section\">\n                                                   <div className=\"row\">\n                                                      <div className=\"new_message_head\">\n                                                         <div className=\"pull-left\"><button><i className=\"fa fa-plus-square-o\" aria-hidden=\"true\"></i> New Message</button></div><div className=\"pull-right\"><div className=\"dropdown\">\n                                                            <button className=\"dropdown-toggle\" type=\"button\" id=\"dropdownMenu1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                                               <i className=\"fa fa-cogs\" aria-hidden=\"true\"></i>  Setting\n    <span className=\"caret\"></span>\n                                                            </button>\n                                                            <ul className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownMenu1\">\n                                                               <li><a href=\"#\">Action</a></li>\n                                                               <li><a href=\"#\">Profile</a></li>\n                                                               <li><a href=\"#\">Logout</a></li>\n                                                            </ul>\n                                                         </div></div>\n                                                      </div>\n\n                                                      <div className=\"chat_area\">\n                                                         <ul className=\"list-unstyled\">\n                                                            {this.state.messagesInfo.length === 0 ? this.state.initChatMessage : \"\"}\n                                                            {this.state.messagesInfo.length !== 0 && this.state.messagesInfo.messages.length === 0 ?\n                                                               <li className=\"left clearfix\">\n                                                                  <div className=\"chat-body1 clearfix\">\n                                                                     <p>Now chatting with <b>{this.state.messagesInfo.dest_fullname}</b></p>\n                                                                     <div className=\"chat_time pull-right\">09:40PM</div>\n                                                                  </div>\n                                                               </li>\n                                                               : \"\"}\n\n\n\n                                                            {/* <li className=\"left clearfix\">\n                                                               <span className=\"chat-img1 pull-left\">\n                                                                  <img src=\"https://lh6.googleusercontent.com/-y-MY2satK-E/AAAAAAAAAAI/AAAAAAAAAJU/ER_hFddBheQ/photo.jpg\" alt=\"User Avatar\" className=\"img-circle\" />\n                                                               </span>\n                                                               <div className=\"chat-body1 clearfix\">\n                                                                  <p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classNameical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia.</p>\n                                                                  <div className=\"chat_time pull-right\">09:40PM</div>\n                                                               </div>\n                                                            </li> */}\n\n                                                            {this.state.messagesInfo.length !== 0 && this.state.messagesInfo.messages.length > 0 ?\n                                                               this.state.messagesInfo.messages.map((msg, i) => {\n                                                                  return <li key={i} className=\"left clearfix admin_chat\">\n                                                                     <span className={'chat-img1 pull-' + msg.pos}>\n                                                                        <img src={\n                                                                           process.env.REACT_APP_API_URL + \"/\" + msg.photo\n                                                                        } alt=\"User Avatar\" className=\"img-circle\" />\n                                                                     </span>\n                                                                     <div className=\"chat-body1 clearfix\">\n                                                                        <p>{msg.msgData}</p>\n                                                                        <div className=\"chat_time pull-left\">{Moment(msg.date).fromNow()}</div>\n                                                                     </div>\n                                                                  </li>\n                                                               })\n\n\n                                                               : \"\"}\n\n                                                            <li style={{ 'marginBottom': '1.5vw' }} id=\"content\"></li>\n                                                         </ul>\n                                                      </div>\n\n                                                      <div className=\"message_write\" >\n                                                         <textarea className=\"form-control\" name=\"msgContent\" value={this.state.msgContent} onChange={this.handleChange} placeholder=\"type a message\"></textarea>\n                                                         <div className=\"clearfix\"></div>\n                                                         <div onClick={(e) => { this.sendMessageToUser(e) }} className=\"chat_bottom\">\n                                                            <a href=\"#\" className=\"pull-left btn btn-success\">\n                                                               Send</a></div>\n                                                      </div>\n                                                   </div>\n                                                </div>\n                                             </div>\n                                          </div>\n                                       </div>\n\n                                    </div>\n                                 </div>\n                              </div>\n                           </div>\n                        </div>\n                     </section>\n\n\n                  </section>\n               </div>\n            </div>\n            <Footer />\n         </div>\n\n      );\n   }\n}\n\nconst state = (state, ownProps = {}) => {\n   return {\n      getUserChatMsg: state.getUserChatMsg.getUserChatMsg,\n      getCurrentProfileInfo: state.getCurrentProfileInfo.getCurrentProfileInfo,\n      getContactChat: state.getContactChat.getContactChat,\n      location: state.location,\n   }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n   return {\n      navigateTo: (location) => {\n         dispatch(push(location));\n      },\n      onGetuserChatContact: () => dispatch(GetuserChatContact()),\n      onGetCurrentUserInfo: (userId) => dispatch(GetCurrentUserInfo(userId)),\n      onsaveUserChatAction: (data) => dispatch(saveUserChatAction(data)),\n      onGetuserChatMsg: (dest_userId) => dispatch(GetuserChatMsg(dest_userId))\n   }\n};\n\nexport default connect(state, mapDispatchToProps)(Chat);\n"]},"metadata":{},"sourceType":"module"}