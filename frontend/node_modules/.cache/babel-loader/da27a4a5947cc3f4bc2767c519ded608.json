{"ast":null,"code":"import _regeneratorRuntime from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Header from'../../common/Header';import Sidebar from'../../common/SideBar';import Footer from'../../common/Footer';import{connect}from\"react-redux\";import{push}from\"react-router-redux\";import{Link}from\"react-router-dom\";import NotificationItem from'./NotificationItem';import{GetuserNotifes}from'../../../store/actions/UsersActions/GetUserNotifiAction';import Moment from'moment';import io from'socket.io-client';export var NotificationsHome=/*#__PURE__*/function(_Component){_inherits(NotificationsHome,_Component);function NotificationsHome(props){var _this;_classCallCheck(this,NotificationsHome);_this=_possibleConstructorReturn(this,_getPrototypeOf(NotificationsHome).call(this,props));_this.state={notifs:[],socketNotif:[],socket:io(process.env.REACT_APP_API_URL)};return _this;}_createClass(NotificationsHome,[{key:\"UNSAFE_componentWillMount\",value:function(){var _UNSAFE_componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var room;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.onGetuserNotifes();case 2:room=localStorage.getItem(\"userId\");this.state.socket.connect(true);this.state.socket.emit('join',room);case 5:case\"end\":return _context.stop();}}},_callee,this);}));function UNSAFE_componentWillMount(){return _UNSAFE_componentWillMount.apply(this,arguments);}return UNSAFE_componentWillMount;}()},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var dataNotif=this.state.socketNotif;this.state.socket.on('userLikesList',function(likes){dataNotif=dataNotif.concat(likes);_this2.setState({socketNotif:dataNotif});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var room=localStorage.getItem(\"userId\");this.state.socket.emit('initLikesList',room);this.state.socket.disconnect(true);}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.getUserNotifs.code===200)this.setState({notifs:nextProps.getUserNotifs.data});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Header,null),React.createElement(Sidebar,null),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"content-wrapper\"},React.createElement(\"section\",{className:\"content\"},React.createElement(\"section\",{className:\"content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"h1\",null,\"NEW\"),this.state.socketNotif!==undefined?this.state.socketNotif.map(function(notif,i){return React.createElement(NotificationItem,{key:i,notif:{id:notif.likerId,from:notif.fullname,option:{type:notif.title,read:false},date:Moment(notif.time).fromNow()}});}):\"\",React.createElement(\"h1\",null,\"SEEN\"),this.state.notifs?this.state.notifs.map(function(notif,i){return notif.seen===0?React.createElement(NotificationItem,{key:i,notif:{id:notif.id,from:notif.fullname,option:{type:notif.categorie,read:false},date:Moment(notif.updatedAt).fromNow()}}):\"\";}):\"\"))))),React.createElement(Footer,null));}}]);return NotificationsHome;}(Component);var state=function state(_state){var ownProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{getUserNotifs:_state.getUserNotifs.getUserNotifs,location:_state.location};};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){return{navigateTo:function navigateTo(location){dispatch(push(location));},onGetuserNotifes:function onGetuserNotifes(){return dispatch(GetuserNotifes());}};};export default connect(state,mapDispatchToProps)(NotificationsHome);","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/components/pages/Notifications/NotificationsHome.js"],"names":["React","Component","Header","Sidebar","Footer","connect","push","Link","NotificationItem","GetuserNotifes","Moment","io","NotificationsHome","props","state","notifs","socketNotif","socket","process","env","REACT_APP_API_URL","onGetuserNotifes","room","localStorage","getItem","emit","dataNotif","on","likes","concat","setState","disconnect","nextProps","getUserNotifs","code","data","undefined","map","notif","i","id","likerId","from","fullname","option","type","title","read","date","time","fromNow","seen","categorie","updatedAt","ownProps","location","mapDispatchToProps","dispatch","navigateTo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Header from '../../common/Header';\nimport Sidebar from '../../common/SideBar';\nimport Footer from '../../common/Footer';\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { Link } from \"react-router-dom\";\nimport NotificationItem from './NotificationItem';\nimport { GetuserNotifes } from '../../../store/actions/UsersActions/GetUserNotifiAction';\nimport Moment from 'moment';\nimport io from 'socket.io-client';\n\nexport class NotificationsHome extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notifs: [],\n            socketNotif: [],\n            socket: io(process.env.REACT_APP_API_URL),\n        }\n\n    }\n\n    async UNSAFE_componentWillMount() {\n        await this.props.onGetuserNotifes();\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.connect(true);\n        this.state.socket.emit('join', room);\n    }\n\n    componentDidMount() {\n        let dataNotif = this.state.socketNotif;\n        this.state.socket.on('userLikesList', (likes) => {\n            dataNotif = dataNotif.concat(likes)\n            this.setState({\n                socketNotif: dataNotif\n            })\n        })\n    }\n\n    componentWillUnmount() {\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.emit('initLikesList', room)\n        this.state.socket.disconnect(true);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        if (nextProps.getUserNotifs.code === 200)\n            this.setState({\n                notifs: nextProps.getUserNotifs.data\n            })\n    }\n\n    render() {\n        return (\n            <div>\n                <Header />\n                <Sidebar />\n                <div>\n                    <div className=\"content-wrapper\">\n                        <section className=\"content\">\n                            <section className=\"content\">\n                                <div className=\"row\">\n                                    <h1>NEW</h1>\n                                    {this.state.socketNotif !== undefined ?\n                                        this.state.socketNotif.map((notif, i)=> {\n                                            return <NotificationItem key={i} notif={{ id: notif.likerId, from: notif.fullname, option: { type: notif.title, read: false }, date: Moment(notif.time).fromNow() }} />\n                                        })\n                                        : \"\"}\n\n\n                                    <h1>SEEN</h1>\n                                    {this.state.notifs ?\n                                        this.state.notifs.map((notif, i) => {\n                                            return notif.seen === 0 ?\n                                                <NotificationItem key={i} notif={{ id: notif.id, from: notif.fullname, option: { type: notif.categorie, read: false }, date: Moment(notif.updatedAt).fromNow() }} />\n                                                : \"\"\n                                        })\n                                        : \"\"}\n                                    {/* <NotificationItem notif={{ from: 'Patricia', option: { type: 'message', read: false, message: 'Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf, Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf, Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf' }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Patricia', option: { type: 'like', read: false }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Patricia', option: { type: 'visit', read: false }, date: 'DISPLAY DATE' }} />\n                                    <h1>SEEN</h1>\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'message', read: true, message: 'On bez ?' }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'like', read: true }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'visit', read: true }, date: 'DISPLAY DATE' }} /> */}\n                                </div>\n                            </section>\n                        </section>\n                    </div>\n                </div>\n                <Footer />\n            </div>\n        )\n    }\n}\n\nconst state = (state, ownProps = {}) => {\n    return {\n        getUserNotifs: state.getUserNotifs.getUserNotifs,\n        location: state.location,\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        navigateTo: (location) => {\n            dispatch(push(location));\n        },\n        onGetuserNotifes: () => dispatch(GetuserNotifes())\n    }\n};\n\nexport default connect(\n    state,\n    mapDispatchToProps\n)(NotificationsHome);\n"]},"metadata":{},"sourceType":"module"}