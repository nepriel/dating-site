{"ast":null,"code":"import _regeneratorRuntime from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios/index\";import{EDIT_USER}from'../ActionType';function editProfile(token,userId,data,dispatch){axios.put(process.env.REACT_APP_API_URL+\"/users/\"+userId,data,{headers:{\"Authorization\":\"Bearer \"+token}}).then(function(results){dispatch({type:EDIT_USER,payload:results.data});dispatch({type:EDIT_USER,payload:\"\"});}).catch(function(err){dispatch({type:EDIT_USER,payload:false});});}export function editThisUser(data){var token=localStorage.getItem(\"token\");var userId=localStorage.getItem(\"userId\");return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var dataHttp,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dataHttp=new FormData();i=0;if(!(data.profilePhoto!==\"\")){_context.next=5;break;}_context.next=5;return dataHttp.append('file',data.profilePhoto,data.profilePhoto.name);case 5:if(!(i<data.multiPhotos.length&&data.multiPhotos.length>0)){_context.next=11;break;}_context.next=8;return dataHttp.append('file',data.multiPhotos[i],data.multiPhotos[i].name);case 8:i++;_context.next=5;break;case 11:dataHttp.append('firstname',data.firstname);dataHttp.append('lastname',data.lastname);dataHttp.append('email',data.email);dataHttp.append('Password',data.Password);dataHttp.append('age',data.age);dataHttp.append('psudonym',data.psudonym);dataHttp.append('SexualOrientation',data.SexualOrientation);dataHttp.append('gender',data.gender);dataHttp.append('location',data.location);dataHttp.append('Fame',data.Fame);dataHttp.append('Bibliography',data.Bibliography);dataHttp.append('profilePhoto',data.profilePhoto!==\"\"?data.profilePhoto.name:\"\");i=0;if(!(data.selectedOption===undefined||data.selectedOption===null)){_context.next=30;break;}data.selectedOption=\"\";_context.next=28;return dataHttp.append('tags',data.selectedOption);case 28:_context.next=37;break;case 30:i=0;case 31:if(!(i<data.selectedOption.length)){_context.next=37;break;}_context.next=34;return dataHttp.append('tags',data.selectedOption[i].value.toLowerCase());case 34:i++;_context.next=31;break;case 37:_context.next=39;return editProfile(token,userId,dataHttp,dispatch);case 39:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/store/actions/UsersActions/EditUserAction.js"],"names":["axios","EDIT_USER","editProfile","token","userId","data","dispatch","put","process","env","REACT_APP_API_URL","headers","then","results","type","payload","catch","err","editThisUser","localStorage","getItem","dataHttp","FormData","i","profilePhoto","append","name","multiPhotos","length","firstname","lastname","email","Password","age","psudonym","SexualOrientation","gender","location","Fame","Bibliography","selectedOption","undefined","value","toLowerCase"],"mappings":"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","sourcesContent":["import axios from \"axios/index\";\nimport {\n    EDIT_USER,\n} from '../ActionType';\n\nfunction editProfile(token, userId, data, dispatch) {\n\n    axios.put(process.env.REACT_APP_API_URL + \"/users/\" + userId, data, {\n        headers: {\n            \"Authorization\": `Bearer ` + token\n        }\n    })\n        .then(results => {\n            dispatch({\n                type: EDIT_USER,\n                payload: results.data,\n            })\n            dispatch({\n                type: EDIT_USER,\n                payload: \"\",\n            })\n\n        })\n        .catch(err => {\n            dispatch({\n                type: EDIT_USER,\n                payload: false,\n            })\n        });\n}\n\nexport function editThisUser(data) {\n    const token = localStorage.getItem(\"token\");\n    const userId = localStorage.getItem(\"userId\");\n\n    return async function (dispatch) {\n        const dataHttp = new FormData()\n        let i = 0;\n\n        if (data.profilePhoto !== \"\")\n            await dataHttp.append('file', data.profilePhoto, data.profilePhoto.name)\n\n        while (i < data.multiPhotos.length && data.multiPhotos.length > 0) {\n            await dataHttp.append('file', data.multiPhotos[i], data.multiPhotos[i].name)\n            i++;\n        }\n\n        dataHttp.append('firstname', data.firstname);\n        dataHttp.append('lastname', data.lastname);\n        dataHttp.append('email', data.email);\n        dataHttp.append('Password', data.Password);\n        dataHttp.append('age', data.age);\n        dataHttp.append('psudonym', data.psudonym);\n        dataHttp.append('SexualOrientation', data.SexualOrientation);\n        dataHttp.append('gender', data.gender);\n        dataHttp.append('location', data.location);\n        dataHttp.append('Fame', data.Fame);\n        dataHttp.append('Bibliography', data.Bibliography);\n        dataHttp.append('profilePhoto', data.profilePhoto !== \"\" ? data.profilePhoto.name : \"\");\n        i = 0;\n        if (data.selectedOption === undefined || data.selectedOption === null) {\n            data.selectedOption = \"\";\n            await dataHttp.append('tags', data.selectedOption);\n        }\n        else\n            for (i = 0; i < data.selectedOption.length; i++) {\n                await dataHttp.append('tags', data.selectedOption[i].value.toLowerCase());\n            }\n\n\n        await editProfile(token, userId, dataHttp, dispatch)\n    }\n\n};"]},"metadata":{},"sourceType":"module"}