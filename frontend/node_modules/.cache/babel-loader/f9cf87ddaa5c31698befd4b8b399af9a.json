{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/common/SideBar.js\";\nimport React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetCurrentUserInfo } from '../../store/actions/UsersActions/FetchCurrentUserInfoAction';\nimport io from 'socket.io-client';\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstname: \"\",\n      socket: io(process.env.REACT_APP_API_URL),\n      lastname: \"\",\n      profilePhoto: \"\",\n      notifCount: 0\n    };\n  }\n\n  async UNSAFE_componentWillMount() {\n    const userId = localStorage.getItem(\"userId\");\n    await this.props.onGetCurrentUserInfo(userId);\n  }\n\n  getProfilePicture(pictures, state) {\n    let pics = [];\n    let i = 0;\n\n    while (i < pictures.length) {\n      if (pictures[i].state === state) pics.push(pictures[i].path);\n      i++;\n    }\n\n    return pics;\n  }\n\n  initProfileInformation(data) {\n    let userInfo = data.info;\n    let profilePhoto = this.getProfilePicture(data.pictures, 1);\n    this.setState({\n      firstname: userInfo.firstname,\n      lastname: userInfo.lastname,\n      profilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\"\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.getCurrentProfileInfo.data) this.initProfileInformation(nextProps.getCurrentProfileInfo.data);\n  }\n\n  componentDidMount() {\n    let room = localStorage.getItem(\"userId\");\n    this.state.socket.connect(true);\n    this.state.socket.emit('join', room);\n    this.state.socket.on('userNotifications', data => {\n      this.setState({\n        notifCount: data.length\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.state.socket.disconnect(true);\n  }\n\n  render() {\n    let image = \"https://mgdetective.ma/wp-content/uploads/2018/05/profile.png\";\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"aside\", {\n      className: \"main-sidebar\",\n      style: {\n        height: \"1200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"user-panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pull-left image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.profilePhoto.toString().substring(0, 4) !== 'https' ? image : process.env.REACT_APP_API_URL + \"/\" + this.state.profilePhoto,\n      className: \"img-circle\",\n      alt: \"User Imag1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"pull-left info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.state.firstname, \" \", this.state.lastname), React.createElement(\"a\", {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-circle text-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), \" Online\"))), React.createElement(\"form\", {\n      action: \"#\",\n      method: \"get\",\n      className: \"sidebar-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"q\",\n      className: \"form-control\",\n      placeholder: \"Search...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"input-group-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      name: \"search\",\n      id: \"search-btn\",\n      className: \"btn btn-flat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }))))), React.createElement(\"ul\", {\n      className: \"sidebar-menu\",\n      \"data-widget\": \"tree\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"NAVIGATION PRINCIPALE\"), React.createElement(\"li\", {\n      className: \"active treeview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      onClick: this.props.navigateTo.bind(this, '/'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Dashboard\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/profile\",\n      onClick: this.props.navigateTo.bind(this, '/profile'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-files-o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Profile\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/chat\",\n      onClick: this.props.navigateTo.bind(this, '/chat'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-th\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Chat\"), React.createElement(\"span\", {\n      className: \"pull-right-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/Notifications\",\n      onClick: this.props.navigateTo.bind(this, '/Notifications'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-bell\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Notifications\"), React.createElement(\"span\", {\n      className: \"pull-right-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.state.notifCount !== 0 ? React.createElement(\"small\", {\n      className: \"label pull-right bg-green\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.notifCount) : \"\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/Suggestion\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-heart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Suggestion\")))))));\n  }\n\n}\n\nconst state = (state, ownProps = {}) => {\n  return {\n    getCurrentProfileInfo: state.getCurrentProfileInfo.getCurrentProfileInfo,\n    location: state.location\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    navigateTo: location => {\n      dispatch(push(location));\n    },\n    onGetCurrentUserInfo: userId => dispatch(GetCurrentUserInfo(userId))\n  };\n};\n\nexport default connect(state, mapDispatchToProps)(Sidebar);","map":{"version":3,"sources":["/usr/src/app/src/components/common/SideBar.js"],"names":["React","useEffect","Link","connect","push","GetCurrentUserInfo","io","Sidebar","Component","constructor","props","state","firstname","socket","process","env","REACT_APP_API_URL","lastname","profilePhoto","notifCount","UNSAFE_componentWillMount","userId","localStorage","getItem","onGetCurrentUserInfo","getProfilePicture","pictures","pics","i","length","path","initProfileInformation","data","userInfo","info","setState","UNSAFE_componentWillReceiveProps","nextProps","getCurrentProfileInfo","componentDidMount","room","emit","on","componentWillUnmount","disconnect","render","image","height","toString","substring","navigateTo","bind","ownProps","location","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["\nimport React, {useEffect} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetCurrentUserInfo } from '../../store/actions/UsersActions/FetchCurrentUserInfoAction';\nimport io from 'socket.io-client';\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstname: \"\",\n      socket: io(process.env.REACT_APP_API_URL),\n      lastname: \"\",\n      profilePhoto: \"\",\n      notifCount: 0,\n    }\n  }\n\n  async UNSAFE_componentWillMount() {\n    const userId = localStorage.getItem(\"userId\");\n    await this.props.onGetCurrentUserInfo(userId);\n  }\n\n  getProfilePicture(pictures, state) {\n    let pics = [];\n    let i = 0;\n    while (i < pictures.length) {\n      if (pictures[i].state === state)\n        pics.push(pictures[i].path)\n      i++;\n    }\n\n    return pics;\n  }\n\n  initProfileInformation(data) {\n    let userInfo = data.info;\n    let profilePhoto = this.getProfilePicture(data.pictures, 1);\n\n    this.setState({\n      firstname: userInfo.firstname,\n      lastname: userInfo.lastname,\n      profilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.getCurrentProfileInfo.data)\n      this.initProfileInformation(nextProps.getCurrentProfileInfo.data);\n  }\n\n\n  componentDidMount() {\n    let room = localStorage.getItem(\"userId\");\n    this.state.socket.connect(true);\n    this.state.socket.emit('join', room);\n    this.state.socket.on('userNotifications', (data) => {\n      this.setState({\n        notifCount: data.length\n      })\n    })\n  }\n\n  componentWillUnmount() {\n    this.state.socket.disconnect(true);\n  }\n\n  render() {\n    let image = \"https://mgdetective.ma/wp-content/uploads/2018/05/profile.png\"\n    \n\n    return (\n      <div>\n        <aside className=\"main-sidebar\" style={{ height: \"1200px\" }}>\n          <section className=\"sidebar\">\n            <div className=\"user-panel\">\n              <div className=\"pull-left image\">\n                <img src={this.state.profilePhoto.toString().substring(0, 4) !== 'https' ?\n                    image\n                    : process.env.REACT_APP_API_URL + \"/\" + this.state.profilePhoto} className=\"img-circle\" alt=\"User Imag1\" />\n              </div>\n              <div className=\"pull-left info\">\n                <p>{this.state.firstname} {this.state.lastname}</p>\n                <a href=\"/\"><i className=\"fa fa-circle text-success\"></i> Online</a>\n              </div>\n            </div>\n            <form action=\"#\" method=\"get\" className=\"sidebar-form\">\n              <div className=\"input-group\">\n                <input type=\"text\" name=\"q\" className=\"form-control\" placeholder=\"Search...\" />\n                <span className=\"input-group-btn\">\n                  <button type=\"submit\" name=\"search\" id=\"search-btn\" className=\"btn btn-flat\"><i className=\"fa fa-search\"></i>\n                  </button>\n                </span>\n              </div>\n            </form>\n            <ul className=\"sidebar-menu\" data-widget=\"tree\">\n              <li className=\"header\">NAVIGATION PRINCIPALE</li>\n              <li className=\"active treeview\">\n                <Link to=\"/\" onClick={this.props.navigateTo.bind(this, '/')}>\n                  <i className=\"fa fa-dashboard\"></i> <span>Dashboard</span>\n                </Link>\n              </li>\n              <li>\n                <Link to=\"/profile\" onClick={this.props.navigateTo.bind(this, '/profile')}>\n                  <i className=\"fa fa-files-o\"></i>\n                  <span>Profile</span>\n                </Link>\n              </li>\n              <li>\n                <Link to=\"/chat\" onClick={this.props.navigateTo.bind(this, '/chat')}>\n                  <i className=\"fa fa-th\"></i> <span>Chat</span>\n                  <span className=\"pull-right-container\">\n                    {/* <small className=\"label pull-right bg-green\">4</small> */}\n                  </span>\n                </Link>\n              </li>\n              <li>\n                <Link to=\"/Notifications\" onClick={this.props.navigateTo.bind(this, '/Notifications')}>\n                  <i className=\"fa fa-bell\"></i> <span>Notifications</span>\n                  <span className=\"pull-right-container\">\n                  {this.state.notifCount !== 0 ?\n                    <small className=\"label pull-right bg-green\">\n                      {this.state.notifCount}\n                    </small>: \"\"}\n                  </span>\n                </Link>\n              </li>\n              <li>\n                <a href= {\"/Suggestion\"}>\n                  <i className=\"fa fa-heart\"></i> <span>Suggestion</span>\n                </a>\n              </li>\n            </ul>\n          </section>\n        </aside>\n      </div>\n    );\n  }\n}\n\nconst state = (state, ownProps = {}) => {\n  return {\n    getCurrentProfileInfo: state.getCurrentProfileInfo.getCurrentProfileInfo,\n    location: state.location,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    navigateTo: (location) => {\n      dispatch(push(location));\n    },\n    onGetCurrentUserInfo: (userId) => dispatch(GetCurrentUserInfo(userId)),\n  }\n};\n\nexport default connect(state, mapDispatchToProps)(Sidebar);"]},"metadata":{},"sourceType":"module"}