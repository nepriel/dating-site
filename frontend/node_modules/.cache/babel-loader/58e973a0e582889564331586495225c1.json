{"ast":null,"code":"import axios from\"axios/index\";import{AUTH_USER}from'../ActionType';import{createBrowserHistory}from\"history\";export function LoginUser(userInfo){return function(dispatch){axios.post(process.env.REACT_APP_API_URL+\"/users/login\",{\"credentials\":{\"email\":userInfo.email,\"password\":userInfo.password}},{'content-type':'application/x-www-form-urlencoded'}).then(function(res){if(res.data.code===200){var history=createBrowserHistory();localStorage.setItem('token',res.data.token);localStorage.setItem('userId',res.data.userId);history.push(\"/\");var urlPath=window.location.href;window.location.href=urlPath;}else{dispatch({type:AUTH_USER,payload:res.data});setTimeout(function(){dispatch({type:AUTH_USER,payload:\"\"});},10);}}).catch(function(err){dispatch({type:AUTH_USER,payload:\"\"});});};};","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/store/actions/UsersActions/LoginUserAction.js"],"names":["axios","AUTH_USER","createBrowserHistory","LoginUser","userInfo","dispatch","post","process","env","REACT_APP_API_URL","email","password","then","res","data","code","history","localStorage","setItem","token","userId","push","urlPath","window","location","href","type","payload","setTimeout","catch","err"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,aAAlB,CACA,OACIC,SADJ,KAEO,eAFP,CAGA,OAASC,oBAAT,KAAqC,SAArC,CAIA,MAAO,SAASC,CAAAA,SAAT,CAAmBC,QAAnB,CAA6B,CAEhC,MAAO,UAAUC,QAAV,CAAoB,CACvBL,KAAK,CAACM,IAAN,CAAWC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAAgC,cAA3C,CAA2D,CACvD,cAAe,CACX,QAASL,QAAQ,CAACM,KADP,CAEX,WAAYN,QAAQ,CAACO,QAFV,CADwC,CAA3D,CAKG,CAAE,eAAgB,mCAAlB,CALH,EAMKC,IANL,CAMU,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,IAAJ,CAASC,IAAT,GAAkB,GAAtB,CAA2B,CACvB,GAAIC,CAAAA,OAAO,CAAGd,oBAAoB,EAAlC,CACAe,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BL,GAAG,CAACC,IAAJ,CAASK,KAAvC,EACAF,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+BL,GAAG,CAACC,IAAJ,CAASM,MAAxC,EACAJ,OAAO,CAACK,IAAR,CAAa,GAAb,EACA,GAAIC,CAAAA,OAAO,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA9B,CACAF,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBH,OAAvB,CACH,CAPD,IAOO,CACHjB,QAAQ,CAAC,CACLqB,IAAI,CAAEzB,SADD,CAEL0B,OAAO,CAAEd,GAAG,CAACC,IAFR,CAAD,CAAR,CAIAc,UAAU,CAAC,UAAM,CACbvB,QAAQ,CAAC,CACLqB,IAAI,CAAEzB,SADD,CAEL0B,OAAO,CAAE,EAFJ,CAAD,CAAR,CAIH,CALS,CAKP,EALO,CAAV,CAMH,CACJ,CA1BL,EA2BKE,KA3BL,CA2BW,SAAAC,GAAG,CAAI,CACVzB,QAAQ,CAAC,CACLqB,IAAI,CAAEzB,SADD,CAEL0B,OAAO,CAAE,EAFJ,CAAD,CAAR,CAIH,CAhCL,EAiCH,CAlCD,CAoCH","sourcesContent":["import axios from \"axios/index\";\nimport {\n    AUTH_USER,\n} from '../ActionType';\nimport { createBrowserHistory } from \"history\";\n\n\n\nexport function LoginUser(userInfo) {\n\n    return function (dispatch) {\n        axios.post(process.env.REACT_APP_API_URL + \"/users/login\", {\n            \"credentials\": {\n                \"email\": userInfo.email,\n                \"password\": userInfo.password\n            },\n        }, { 'content-type': 'application/x-www-form-urlencoded' })\n            .then(res => {\n                if (res.data.code === 200) {\n                    let history = createBrowserHistory();\n                    localStorage.setItem('token', res.data.token);\n                    localStorage.setItem('userId', res.data.userId);\n                    history.push(\"/\");\n                    let urlPath = window.location.href;\n                    window.location.href = urlPath;\n                } else {\n                    dispatch({\n                        type: AUTH_USER,\n                        payload: res.data,\n                    });\n                    setTimeout(() => {\n                        dispatch({\n                            type: AUTH_USER,\n                            payload: \"\",\n                        })\n                    }, 10)\n                }\n            })\n            .catch(err => {\n                dispatch({\n                    type: AUTH_USER,\n                    payload: \"\"\n                })\n            });\n    }\n\n};"]},"metadata":{},"sourceType":"module"}