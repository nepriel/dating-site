{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/pages/Notifications/NotificationsHome.js\";\nimport React, { Component } from 'react';\nimport Header from '../../common/Header';\nimport Sidebar from '../../common/SideBar';\nimport Footer from '../../common/Footer';\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { Link } from \"react-router-dom\";\nimport NotificationItem from './NotificationItem';\nimport { GetuserNotifes } from '../../../store/actions/UsersActions/GetUserNotifiAction';\nimport Moment from 'moment';\nimport io from 'socket.io-client';\nexport class NotificationsHome extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notifs: [],\n      socketNotif: [],\n      socket: io(process.env.REACT_APP_API_URL)\n    };\n  }\n\n  async UNSAFE_componentWillMount() {\n    await this.props.onGetuserNotifes();\n    let room = localStorage.getItem(\"userId\");\n    this.state.socket.connect(true);\n    this.state.socket.emit('join', room);\n  }\n\n  componentDidMount() {\n    let dataNotif = this.state.socketNotif;\n    this.state.socket.on('userLikesList', likes => {\n      dataNotif = dataNotif.concat(likes);\n      this.setState({\n        socketNotif: dataNotif\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    let room = localStorage.getItem(\"userId\");\n    this.state.socket.emit('initLikesList', room);\n    this.state.socket.disconnect(true);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.getUserNotifs.code === 200) this.setState({\n      notifs: nextProps.getUserNotifs.data\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(Sidebar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"NEW\"), this.state.socketNotif !== undefined ? this.state.socketNotif.map(notif => {\n      return React.createElement(NotificationItem, {\n        notif: {\n          id: notif.likerId,\n          from: notif.fullname,\n          option: {\n            type: notif.title,\n            read: false\n          },\n          date: Moment(notif.time).fromNow()\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      });\n    }) : \"\", React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"SEEN\"), this.state.notifs ? this.state.notifs.map(notif => {\n      return notif.seen === 0 ? React.createElement(NotificationItem, {\n        notif: {\n          id: notif.id,\n          from: notif.fullname,\n          option: {\n            type: notif.categorie,\n            read: false\n          },\n          date: Moment(notif.updatedAt).fromNow()\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }) : \"\";\n    }) : \"\"))))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst state = (state, ownProps = {}) => {\n  return {\n    getUserNotifs: state.getUserNotifs.getUserNotifs,\n    location: state.location\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    navigateTo: location => {\n      dispatch(push(location));\n    },\n    onGetuserNotifes: () => dispatch(GetuserNotifes())\n  };\n};\n\nexport default connect(state, mapDispatchToProps)(NotificationsHome);","map":{"version":3,"sources":["/usr/src/app/src/components/pages/Notifications/NotificationsHome.js"],"names":["React","Component","Header","Sidebar","Footer","connect","push","Link","NotificationItem","GetuserNotifes","Moment","io","NotificationsHome","constructor","props","state","notifs","socketNotif","socket","process","env","REACT_APP_API_URL","UNSAFE_componentWillMount","onGetuserNotifes","room","localStorage","getItem","emit","componentDidMount","dataNotif","on","likes","concat","setState","componentWillUnmount","disconnect","UNSAFE_componentWillReceiveProps","nextProps","getUserNotifs","code","data","render","undefined","map","notif","id","likerId","from","fullname","option","type","title","read","date","time","fromNow","seen","categorie","updatedAt","ownProps","location","mapDispatchToProps","dispatch","navigateTo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Header from '../../common/Header';\nimport Sidebar from '../../common/SideBar';\nimport Footer from '../../common/Footer';\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { Link } from \"react-router-dom\";\nimport NotificationItem from './NotificationItem';\nimport { GetuserNotifes } from '../../../store/actions/UsersActions/GetUserNotifiAction';\nimport Moment from 'moment';\nimport io from 'socket.io-client';\n\nexport class NotificationsHome extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notifs: [],\n            socketNotif: [],\n            socket: io(process.env.REACT_APP_API_URL),\n        }\n\n    }\n\n    async UNSAFE_componentWillMount() {\n        await this.props.onGetuserNotifes();\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.connect(true);\n        this.state.socket.emit('join', room);\n    }\n\n    componentDidMount() {\n        let dataNotif = this.state.socketNotif;\n        this.state.socket.on('userLikesList', (likes) => {\n            dataNotif = dataNotif.concat(likes)\n            this.setState({\n                socketNotif: dataNotif\n            })\n        })\n    }\n\n    componentWillUnmount() {\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.emit('initLikesList', room)\n        this.state.socket.disconnect(true);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        if (nextProps.getUserNotifs.code === 200)\n            this.setState({\n                notifs: nextProps.getUserNotifs.data\n            })\n    }\n\n    render() {\n        return (\n            <div>\n                <Header />\n                <Sidebar />\n                <div>\n                    <div className=\"content-wrapper\">\n                        <section className=\"content\">\n                            <section className=\"content\">\n                                <div className=\"row\">\n                                    <h1>NEW</h1>\n                                    {this.state.socketNotif !== undefined ?\n                                        this.state.socketNotif.map(notif => {\n                                            return <NotificationItem notif={{ id: notif.likerId, from: notif.fullname, option: { type: notif.title, read: false }, date: Moment(notif.time).fromNow() }} />\n                                        })\n                                        : \"\"}\n\n\n                                    <h1>SEEN</h1>\n                                    {this.state.notifs ?\n                                        this.state.notifs.map(notif => {\n                                            return notif.seen === 0 ?\n                                                <NotificationItem notif={{ id: notif.id, from: notif.fullname, option: { type: notif.categorie, read: false }, date: Moment(notif.updatedAt).fromNow() }} />\n                                                : \"\"\n                                        })\n                                        : \"\"}\n                                    {/* <NotificationItem notif={{ from: 'Patricia', option: { type: 'message', read: false, message: 'Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf, Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf, Salut Salut je m\\'apelle Patricia et mon prenom commence par un P comme patapouf' }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Patricia', option: { type: 'like', read: false }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Patricia', option: { type: 'visit', read: false }, date: 'DISPLAY DATE' }} />\n                                    <h1>SEEN</h1>\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'message', read: true, message: 'On bez ?' }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'like', read: true }, date: 'DISPLAY DATE' }} />\n                                    <NotificationItem notif={{ from: 'Edgard', option: { type: 'visit', read: true }, date: 'DISPLAY DATE' }} /> */}\n                                </div>\n                            </section>\n                        </section>\n                    </div>\n                </div>\n                <Footer />\n            </div>\n        )\n    }\n}\n\nconst state = (state, ownProps = {}) => {\n    return {\n        getUserNotifs: state.getUserNotifs.getUserNotifs,\n        location: state.location,\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        navigateTo: (location) => {\n            dispatch(push(location));\n        },\n        onGetuserNotifes: () => dispatch(GetuserNotifes())\n    }\n};\n\nexport default connect(\n    state,\n    mapDispatchToProps\n)(NotificationsHome);\n"]},"metadata":{},"sourceType":"module"}