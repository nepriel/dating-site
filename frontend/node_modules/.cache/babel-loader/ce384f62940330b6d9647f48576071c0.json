{"ast":null,"code":"import _regeneratorRuntime from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Header from\"../../common/Header\";import Sidebar from\"../../common/SideBar\";import Footer from\"../../common/Footer\";import{connect}from\"react-redux\";import{push}from\"react-router-redux\";import{GetUserInfo}from'../../../store/actions/UsersActions/FetchUserInfoAction';import{GetUserIntrests}from'../../../store/actions/intrestsActions/GetAllInterestsAction';import{GetuserLikes}from'../../../store/actions/UsersActions/GetUserlikesDislikesAction';import{PutUpdateUserLikes}from'../../../store/actions/UsersActions/UpdateUserLikeDislikeAction';import{BlockThisUser}from\"../../../store/actions/UsersActions/BlockUserAction\";import{VisitThisUser}from'../../../store/actions/UsersActions/VisitUserAction';import Moment from'moment';import{PutUpdateUserUnlikes}from'../../../store/actions/UsersActions/UpdateUserUnlikes';import{reportThisUser}from'../../../store/actions/UsersActions/ReportUserAction';import{ToastContainer}from'react-toastify';import io from'socket.io-client';var customNotification=require('../utils/notification');var ProfileDetails=/*#__PURE__*/function(_React$Component){_inherits(ProfileDetails,_React$Component);function ProfileDetails(props){var _this;_classCallCheck(this,ProfileDetails);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProfileDetails).call(this,props));_this.state={firstname:\"\",likes:0,dislikes:0,singleHObbi:\"\",psudonym:\"\",socket:io(process.env.REACT_APP_API_URL),lastname:\"\",showAddHobi:false,countLikes:0,userHasLikedMe:\"\",countdisLikes:0,profilePhoto:\"\",email:\"\",oldMultiPhotos:[],oldProfilePhoto:\"\",age:\"\",multiPhotos:[],Password:\"\",interestsArray:[],SexualOrientation:\"\",ProfileCompletion:\"\",online:\"\",updatedAt:\"\",gender:\"\",location:\"\",Fame:\"\",Bibliography:\"\",selectedOption:[]};_this.handlelikes=_this.handlelikes.bind(_assertThisInitialized(_this));_this.handleBlock=_this.handleBlock.bind(_assertThisInitialized(_this));_this.handleReport=_this.handleReport.bind(_assertThisInitialized(_this));return _this;}_createClass(ProfileDetails,[{key:\"handleBlock\",value:function(){var _handleBlock=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this2=this;var userId,userAction;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();userId=this.props.match.params.id;_context.next=4;return this.props.onBlockThisUser(userId);case 4:userAction=localStorage.getItem(\"userId\");setTimeout(function(){var data={id:userAction+userId,title:\"block\",fullname:\"\",msg:\" blocked your profile\",likerId:userAction,likedId:userId,time:Moment()};_this2.state.socket.emit('likeUser',data);},320);case 6:case\"end\":return _context.stop();}}},_callee,this);}));function handleBlock(_x){return _handleBlock.apply(this,arguments);}return handleBlock;}()},{key:\"handleReport\",value:function(){var _handleReport=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this3=this;var userId,userAction;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();userId=this.props.match.params.id;_context2.next=4;return this.props.onreportThisUser(userId);case 4:userAction=localStorage.getItem(\"userId\");setTimeout(function(){var data={id:userAction+userId,title:\"report\",fullname:\"\",msg:\" reported your profile\",likerId:userAction,likedId:userId,time:Moment()};_this3.state.socket.emit('likeUser',data);},320);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleReport(_x2){return _handleReport.apply(this,arguments);}return handleReport;}()},{key:\"handlelikes\",value:function(){var _handlelikes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e,state){var _this4=this;var userId,userAction;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();userId=this.props.match.params.id;userAction=localStorage.getItem(\"userId\");_context4.next=5;return this.props.onPutUpdateUserLikes(userId,state);case 5:setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this4.props.onGetuserLikes(userId);case 2:case\"end\":return _context3.stop();}}},_callee3);})),10);setTimeout(function(){var data={id:userAction+userId,title:\"\",fullname:\"\",msg:\"\",likerId:userAction,likedId:userId,time:Moment()};if(_this4.state.countDislikes<_this4.state.dislikes)if(state===1){data.title=\"dislike\";data.msg=\" disliked your profile\";_this4.state.socket.emit('likeUser',data);}if(_this4.state.countLikes<_this4.state.likes)if(state===0){data.msg=\" liked your profile\";data.title=\"like\";_this4.state.socket.emit('likeUser',data);}if(_this4.state.countLikes>_this4.state.likes){_this4.props.onPutUpdateUserUnlikes(userId);if(state===0){data.msg=\" unliked your profile\";data.title=\"unlike\";_this4.state.socket.emit('likeUser',data);}}var init=_this4.state.likes;var initDislike=_this4.state.dislikes;_this4.setState({countLikes:init,countDislikes:initDislike});},320);case 7:case\"end\":return _context4.stop();}}},_callee4,this);}));function handlelikes(_x3,_x4){return _handlelikes.apply(this,arguments);}return handlelikes;}()},{key:\"getProfilePicture\",value:function getProfilePicture(pictures,state){var pics=[];var i=0;while(i<pictures.length){if(pictures[i].state===state)pics.push(pictures[i].path);i++;}return pics;}},{key:\"initProfileInformation\",value:function initProfileInformation(data){var userInfo=data.info;var profilePhoto=this.getProfilePicture(data.pictures,1);var photoes=this.getProfilePicture(data.pictures,0);var userInterests=data.tags;this.setState({userHasLikedMe:data.liked,firstname:userInfo.firstname,psudonym:userInfo.pseudo,lastname:userInfo.lastname,oldProfilePhoto:profilePhoto.length>0?profilePhoto:\"\",profilePhoto:\"\",email:userInfo.email,online:userInfo.online,updatedAt:userInfo.updatedAt,age:userInfo.age,oldMultiPhotos:photoes,multiPhotos:[],selectedOption:userInterests,SexualOrientation:userInfo.sexual_orientation,ProfileCompletion:userInfo.profile_completion,gender:userInfo.gender,location:userInfo.localisation,Fame:userInfo.fame,Bibliography:userInfo.bio});}},{key:\"initInterestArray\",value:function initInterestArray(interests){this.setState({interestsArray:interests});}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.getUserLikes.data!==undefined)this.setState({likes:nextProps.getUserLikes.data.likes,dislikes:nextProps.getUserLikes.data.dislikes});if(nextProps.getProfileInfo.data!==undefined)this.initProfileInformation(nextProps.getProfileInfo.data);if(nextProps.getUserInterests!==undefined&&nextProps.getUserInterests.code===200)this.initInterestArray(nextProps.getUserInterests.data);if(nextProps.blockUser!==undefined&&nextProps.blockUser.code===200)customNotification.fireNotification(\"success\",nextProps.blockUser.msg);if(nextProps.reportUser!==undefined&&nextProps.reportUser.code===200)customNotification.fireNotification(\"success\",nextProps.reportUser.msg);}},{key:\"UNSAFE_componentWillMount\",value:function(){var _UNSAFE_componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this5=this;var userId,userAction;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:userId=this.props.match.params.id;_context5.next=3;return this.props.onGetUserInfo(userId);case 3:_context5.next=5;return this.props.onGetUserIntrests(userId);case 5:_context5.next=7;return this.props.onGetuserLikes(userId);case 7:_context5.next=9;return this.props.onVisitThisUser(userId);case 9:userAction=localStorage.getItem(\"userId\");setTimeout(function(){var likes=_this5.state.likes;var dislike=_this5.state.dislikes;_this5.setState({countLikes:likes,countDislikes:dislike});var data={id:userAction+userId,title:\"visit\",fullname:\"\",msg:\" has visited your profile\",likerId:userAction,likedId:userId,time:Moment()};_this5.state.socket.emit('likeUser',data);},300);case 11:case\"end\":return _context5.stop();}}},_callee5,this);}));function UNSAFE_componentWillMount(){return _UNSAFE_componentWillMount.apply(this,arguments);}return UNSAFE_componentWillMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.socket.disconnect(true);}},{key:\"componentDidMount\",value:function componentDidMount(){var room=localStorage.getItem(\"userId\");this.state.socket.connect(true);this.state.socket.emit('join',room);}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(\"div\",null,React.createElement(Header,null),React.createElement(ToastContainer,null),React.createElement(\"div\",{className:\"content-wrapper\"},React.createElement(\"section\",{className:\"content-header\"},React.createElement(\"br\",null),React.createElement(\"ol\",{className:\"breadcrumb\"},React.createElement(\"li\",null,React.createElement(\"a\",{href:\"/\"},React.createElement(\"i\",{className:\"fa fa-dashboard\"}),\" Home\")))),React.createElement(\"section\",{className:\"content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"div\",{className:\"box box-primary\",id:\"fixMarginTop\"},React.createElement(\"div\",{className:\"box-body box-profile\"},this.state.oldProfilePhoto&&this.state.profilePhoto===\"\"?React.createElement(\"img\",{className:\"profile-user-img img-responsive img-circle\",src:this.state.oldProfilePhoto.toString().substring(0,4)!=='http'?process.env.REACT_APP_API_URL+\"/\"+this.state.oldProfilePhoto:this.state.oldProfilePhoto,alt:\"pic holder\"}):\"\",React.createElement(\"h3\",{className:\"profile-username text-center\"},this.state.firstname,\" \",this.state.lastname),React.createElement(\"h5\",{style:{'fontSize':'16px'},className:\"text-muted text-center\"},this.state.online===0?\"Last login : \"+Moment().format('ll',this.state.updatedAt):\"this user is online\"),React.createElement(\"h5\",{style:{'fontSize':'12px'},className:\"text-muted text-center\"},this.state.online===0?Moment(this.state.updatedAt).fromNow():\"\"),React.createElement(\"h5\",{style:{'fontSize':'12px'},className:\"text-muted text-center\"},this.state.userHasLikedMe===true?\"This User liked me\":\"\"),React.createElement(\"ul\",{className:\"list-group list-group-unbordered text-center\"},React.createElement(\"li\",{className:\"list-group-item\"},this.state.oldProfilePhoto===\"\"&&this.state.oldMultiPhotos.length===0?\"\":React.createElement(\"span\",null,React.createElement(\"button\",{onClick:function onClick(e){_this6.handlelikes(e,0);},className:\"btn btn-primary\"},\"Like \",this.state.likes),React.createElement(\"button\",{onClick:function onClick(e){_this6.handlelikes(e,1);},className:\"btn btn-warning\"},\"Dislike \",this.state.dislikes)),React.createElement(\"button\",{onClick:function onClick(e){_this6.handleBlock(e);},className:\"btn btn-danger\"},\"Block\"),React.createElement(\"button\",{onClick:function onClick(e){_this6.handleReport(e);},className:\"btn btn-danger\"},\"Report\"))))),React.createElement(\"div\",{className:\"box box-primary\"},React.createElement(\"div\",{className:\"box-header with-border\"},React.createElement(\"h3\",{className:\"box-title\"},\"About Me\")),React.createElement(\"div\",{className:\"box-body\"},React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Pseudo : \",this.state.psudonym),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Age : \",this.state.age),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Gender : \",this.state.gender),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Location : \",this.state.location),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" SexualOrientation : \",this.state.SexualOrientation),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Profile completion : \",this.state.ProfileCompletion),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Fame : \",this.state.Fame),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Interests :\"),this.state.selectedOption?this.state.selectedOption.map(function(hobi,i){return React.createElement(\"p\",{key:i},hobi.label);}):\"\",React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Images :\"),React.createElement(\"div\",{className:\"input-group image-preview col-md-10 col-md-offset-2\"},this.state.oldMultiPhotos&&this.state.multiPhotos.length===0?this.state.oldMultiPhotos.map(function(oldProfilePhoto,index){return React.createElement(\"img\",{key:index,style:{position:'relative',float:'left',width:'200px'},className:\"img-responsive center-block\",src:oldProfilePhoto.indexOf(\"http\")!==1?process.env.REACT_APP_API_URL+\"/\"+oldProfilePhoto:oldProfilePhoto,alt:\"pic holder\"});}):\"\"),React.createElement(\"div\",null),React.createElement(\"hr\",null),React.createElement(\"strong\",null,React.createElement(\"i\",{className:\" margin-r-5\"}),\" Bibliography : \",this.state.Bibliography))))))),React.createElement(Sidebar,null),React.createElement(Footer,null));}}]);return ProfileDetails;}(React.Component);var state=function state(_state){var ownProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{reportUser:_state.reportUser.reportUser,blockUser:_state.blockUser.blockUser,getUserLikes:_state.getUserLikes.getUserLikes,location:_state.location,getUserInterests:_state.getUserInterests.getUserInterests,getProfileInfo:_state.getProfileInfo.getProfileInfo};};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){return{navigateTo:function navigateTo(location){dispatch(push(location));},onGetUserInfo:function onGetUserInfo(userId){return dispatch(GetUserInfo(userId));},onGetUserIntrests:function onGetUserIntrests(userId){return dispatch(GetUserIntrests(userId));},onGetuserLikes:function onGetuserLikes(userId){return dispatch(GetuserLikes(userId));},onPutUpdateUserLikes:function onPutUpdateUserLikes(userId,cheker){return dispatch(PutUpdateUserLikes(userId,cheker));},onBlockThisUser:function onBlockThisUser(blocked_userId){return dispatch(BlockThisUser(blocked_userId));},onVisitThisUser:function onVisitThisUser(visited_userId){return dispatch(VisitThisUser(visited_userId));},onreportThisUser:function onreportThisUser(reported_userId){return dispatch(reportThisUser(reported_userId));},onPutUpdateUserUnlikes:function onPutUpdateUserUnlikes(userId){return dispatch(PutUpdateUserUnlikes(userId));}};};export default connect(state,mapDispatchToProps)(ProfileDetails);","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/components/pages/ProfileDetail/ProfileDetail.js"],"names":["React","Header","Sidebar","Footer","connect","push","GetUserInfo","GetUserIntrests","GetuserLikes","PutUpdateUserLikes","BlockThisUser","VisitThisUser","Moment","PutUpdateUserUnlikes","reportThisUser","ToastContainer","io","customNotification","require","ProfileDetails","props","state","firstname","likes","dislikes","singleHObbi","psudonym","socket","process","env","REACT_APP_API_URL","lastname","showAddHobi","countLikes","userHasLikedMe","countdisLikes","profilePhoto","email","oldMultiPhotos","oldProfilePhoto","age","multiPhotos","Password","interestsArray","SexualOrientation","ProfileCompletion","online","updatedAt","gender","location","Fame","Bibliography","selectedOption","handlelikes","bind","handleBlock","handleReport","e","preventDefault","userId","match","params","id","onBlockThisUser","userAction","localStorage","getItem","setTimeout","data","title","fullname","msg","likerId","likedId","time","emit","onreportThisUser","onPutUpdateUserLikes","onGetuserLikes","countDislikes","onPutUpdateUserUnlikes","init","initDislike","setState","pictures","pics","i","length","path","userInfo","info","getProfilePicture","photoes","userInterests","tags","liked","pseudo","sexual_orientation","profile_completion","localisation","fame","bio","interests","nextProps","getUserLikes","undefined","getProfileInfo","initProfileInformation","getUserInterests","code","initInterestArray","blockUser","fireNotification","reportUser","onGetUserInfo","onGetUserIntrests","onVisitThisUser","dislike","disconnect","room","toString","substring","format","fromNow","map","hobi","label","index","position","float","width","indexOf","Component","ownProps","mapDispatchToProps","dispatch","navigateTo","cheker","blocked_userId","visited_userId","reported_userId"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"../../common/Header\";\nimport Sidebar from \"../../common/SideBar\";\nimport Footer from \"../../common/Footer\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetUserInfo } from '../../../store/actions/UsersActions/FetchUserInfoAction';\nimport { GetUserIntrests } from '../../../store/actions/intrestsActions/GetAllInterestsAction';\nimport { GetuserLikes } from '../../../store/actions/UsersActions/GetUserlikesDislikesAction';\nimport { PutUpdateUserLikes } from '../../../store/actions/UsersActions/UpdateUserLikeDislikeAction';\nimport { BlockThisUser } from \"../../../store/actions/UsersActions/BlockUserAction\";\nimport { VisitThisUser } from '../../../store/actions/UsersActions/VisitUserAction';\nimport Moment from 'moment';\nimport { PutUpdateUserUnlikes } from '../../../store/actions/UsersActions/UpdateUserUnlikes';\nimport { reportThisUser } from '../../../store/actions/UsersActions/ReportUserAction';\nimport { ToastContainer } from 'react-toastify';\nimport io from 'socket.io-client';\nconst customNotification = require('../utils/notification');\n\nclass ProfileDetails extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            firstname: \"\",\n            likes: 0,\n            dislikes: 0,\n            singleHObbi: \"\",\n            psudonym: \"\",\n            socket: io(process.env.REACT_APP_API_URL),\n            lastname: \"\",\n            showAddHobi: false,\n            countLikes: 0,\n            userHasLikedMe: \"\",\n            countdisLikes: 0,\n            profilePhoto: \"\",\n            email: \"\",\n            oldMultiPhotos: [],\n            oldProfilePhoto: \"\",\n            age: \"\",\n            multiPhotos: [],\n            Password: \"\",\n            interestsArray: [],\n            SexualOrientation: \"\",\n            ProfileCompletion: \"\",\n            online: \"\",\n            updatedAt: \"\",\n            gender: \"\",\n            location: \"\",\n            Fame: \"\",\n            Bibliography: \"\",\n            selectedOption: [],\n        };\n\n        this.handlelikes = this.handlelikes.bind(this);\n        this.handleBlock = this.handleBlock.bind(this);\n        this.handleReport = this.handleReport.bind(this);\n    }\n\n    async handleBlock(e) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        await this.props.onBlockThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"block\",\n                fullname: \"\",\n                msg: \" blocked your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n            this.state.socket.emit('likeUser', data)\n        }, 320)\n    }\n\n    async handleReport(e) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        await this.props.onreportThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"report\",\n                fullname: \"\",\n                msg: \" reported your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n            this.state.socket.emit('likeUser', data)\n        }, 320)\n    }\n\n    async handlelikes(e, state) {\n        e.preventDefault();\n        let userId = this.props.match.params.id;\n        let userAction = localStorage.getItem(\"userId\");\n\n        await this.props.onPutUpdateUserLikes(userId, state);\n        setTimeout(async () => {\n            await this.props.onGetuserLikes(userId);\n        }, 10)\n\n        setTimeout(() => {\n            let data = {\n                id: userAction + userId,\n                title: \"\",\n                fullname: \"\",\n                msg: \"\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n\n            if (this.state.countDislikes < this.state.dislikes)\n                if (state === 1) {\n                    data.title = \"dislike\";\n                    data.msg = \" disliked your profile\";\n                    this.state.socket.emit('likeUser', data)\n                }\n\n            if (this.state.countLikes < this.state.likes)\n                if (state === 0) {\n                    data.msg = \" liked your profile\";\n                    data.title = \"like\";\n                    this.state.socket.emit('likeUser', data)\n                }\n\n            if (this.state.countLikes > this.state.likes) {\n                this.props.onPutUpdateUserUnlikes(userId);\n                if (state === 0) {\n                    data.msg = \" unliked your profile\";\n                    data.title = \"unlike\";\n                    this.state.socket.emit('likeUser', data)\n                }\n            }\n\n\n            let init = this.state.likes;\n            let initDislike = this.state.dislikes;\n            this.setState({\n                countLikes: init,\n                countDislikes: initDislike\n            })\n        }, 320)\n    }\n\n\n    getProfilePicture(pictures, state) {\n        let pics = [];\n        let i = 0;\n        while (i < pictures.length) {\n            if (pictures[i].state === state)\n                pics.push(pictures[i].path)\n            i++;\n        }\n\n        return pics;\n    }\n\n    initProfileInformation(data) {\n        let userInfo = data.info;\n        let profilePhoto = this.getProfilePicture(data.pictures, 1);\n        let photoes = this.getProfilePicture(data.pictures, 0)\n\n        let userInterests = data.tags;\n\n        this.setState({\n            userHasLikedMe: data.liked,\n            firstname: userInfo.firstname,\n            psudonym: userInfo.pseudo,\n            lastname: userInfo.lastname,\n            oldProfilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n            profilePhoto: \"\",\n            email: userInfo.email,\n            online: userInfo.online,\n            updatedAt: userInfo.updatedAt,\n            age: userInfo.age,\n            oldMultiPhotos: photoes,\n            multiPhotos: [],\n            selectedOption: userInterests,\n            SexualOrientation: userInfo.sexual_orientation,\n            ProfileCompletion: userInfo.profile_completion,\n            gender: userInfo.gender,\n            location: userInfo.localisation,\n            Fame: userInfo.fame,\n            Bibliography: userInfo.bio,\n        })\n    }\n\n    initInterestArray(interests) {\n        this.setState({\n            interestsArray: interests\n        })\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        if (nextProps.getUserLikes.data !== undefined)\n            this.setState({\n                likes: nextProps.getUserLikes.data.likes,\n                dislikes: nextProps.getUserLikes.data.dislikes\n            })\n        if (nextProps.getProfileInfo.data !== undefined)\n            this.initProfileInformation(nextProps.getProfileInfo.data);\n        if (nextProps.getUserInterests !== undefined && nextProps.getUserInterests.code === 200)\n            this.initInterestArray(nextProps.getUserInterests.data)\n        if (nextProps.blockUser !== undefined && nextProps.blockUser.code === 200)\n            customNotification.fireNotification(\"success\", nextProps.blockUser.msg)\n        if (nextProps.reportUser !== undefined && nextProps.reportUser.code === 200)\n            customNotification.fireNotification(\"success\", nextProps.reportUser.msg)\n    }\n\n\n    async UNSAFE_componentWillMount() {\n        let userId = this.props.match.params.id;\n        await this.props.onGetUserInfo(userId);\n        await this.props.onGetUserIntrests(userId);\n        await this.props.onGetuserLikes(userId);\n        await this.props.onVisitThisUser(userId);\n        let userAction = localStorage.getItem(\"userId\");\n\n        setTimeout(() => {\n            let likes = this.state.likes;\n            let dislike = this.state.dislikes;\n            this.setState({\n                countLikes: likes,\n                countDislikes: dislike\n            })\n\n            let data = {\n                id: userAction + userId,\n                title: \"visit\",\n                fullname: \"\",\n                msg: \" has visited your profile\",\n                likerId: userAction,\n                likedId: userId,\n                time: Moment()\n            }\n\n            this.state.socket.emit('likeUser', data)\n        }, 300)\n    }\n\n    componentWillUnmount() {\n        this.state.socket.disconnect(true);\n    }\n\n    componentDidMount() {\n        let room = localStorage.getItem(\"userId\");\n        this.state.socket.connect(true);\n        this.state.socket.emit('join', room);\n    }\n\n    render() {\n\n\n        return (\n            <div>\n                <Header />\n                <ToastContainer />\n                <div className=\"content-wrapper\" >\n                    <section className=\"content-header\" >\n                        <br></br>\n                        <ol className=\"breadcrumb\">\n                            <li>\n                                <a href=\"/\">\n                                    <i className=\"fa fa-dashboard\"></i> Home\n                </a>\n                            </li>\n                        </ol>\n                    </section>\n\n                    <section className=\"content\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <div className=\"box box-primary\" id=\"fixMarginTop\">\n                                    <div className=\"box-body box-profile\">\n                                        {this.state.oldProfilePhoto && this.state.profilePhoto === \"\" ?\n                                            <img\n                                                className=\"profile-user-img img-responsive img-circle\"\n\n                                                src={this.state.oldProfilePhoto.toString().substring(0, 4) !== 'http' ?\n                                                    process.env.REACT_APP_API_URL +\n                                                    \"/\" +\n                                                    this.state.oldProfilePhoto :\n                                                    this.state.oldProfilePhoto\n                                                }\n                                                alt=\"pic holder\"\n                                            />\n                                            : \"\"}\n\n\n                                        <h3 className=\"profile-username text-center\">\n                                            {this.state.firstname}{\" \"}\n                                            {this.state.lastname}\n                                        </h3>\n\n                                        <h5 style={{ 'fontSize': '16px' }} className=\"text-muted text-center\">\n                                            {this.state.online === 0 ?\n                                                \"Last login : \" +\n                                                Moment().format('ll', this.state.updatedAt)\n                                                :\n                                                \"this user is online\"}\n                                        </h5>\n                                        <h5 style={{ 'fontSize': '12px' }} className=\"text-muted text-center\">\n                                            {this.state.online === 0 ?\n                                                Moment(this.state.updatedAt).fromNow()\n                                                :\n                                                \"\"}\n                                        </h5>\n\n                                        <h5 style={{ 'fontSize': '12px' }} className=\"text-muted text-center\">\n                                            {this.state.userHasLikedMe === true ?\n                                                \"This User liked me\" :\n                                                \"\"}\n                                        </h5>\n\n                                        <ul className=\"list-group list-group-unbordered text-center\">\n                                            <li className=\"list-group-item\">\n                                                {this.state.oldProfilePhoto === \"\" && this.state.oldMultiPhotos.length === 0\n                                                    ? \"\" : <span>\n                                                        <button onClick={(e) => { this.handlelikes(e, 0) }} className=\"btn btn-primary\">Like {this.state.likes}</button>\n                                                        <button onClick={(e) => { this.handlelikes(e, 1) }} className=\"btn btn-warning\">Dislike {this.state.dislikes}</button>\n\n                                                    </span>}\n                                                <button onClick={(e) => { this.handleBlock(e) }} className=\"btn btn-danger\">Block</button>\n                                                <button onClick={(e) => { this.handleReport(e) }} className=\"btn btn-danger\">Report</button>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n\n                                <div className=\"box box-primary\">\n                                    <div className=\"box-header with-border\">\n                                        <h3 className=\"box-title\">About Me</h3>\n                                    </div>\n                                    <div className=\"box-body\">\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Pseudo : {this.state.psudonym}\n                                        </strong>\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Age : {this.state.age}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Gender : {this.state.gender}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Location : {this.state.location}\n                                        </strong>\n\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> SexualOrientation : {this.state.SexualOrientation}\n                                        </strong>\n\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Profile completion : {this.state.ProfileCompletion}\n                                        </strong>\n                                        <hr></hr>\n\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Fame : {this.state.Fame}\n                                        </strong>\n\n                                        <hr></hr>\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Interests :\n                                        </strong>\n\n                                        {this.state.selectedOption ? this.state.selectedOption.map((hobi, i) => {\n                                            return <p key={i}>{hobi.label}</p>\n                                        }) : \"\"}\n\n                                        <hr></hr>\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Images :\n                                        </strong>\n\n                                        <div className=\"input-group image-preview col-md-10 col-md-offset-2\">\n                                            {this.state.oldMultiPhotos && this.state.multiPhotos.length === 0 ?\n                                                this.state.oldMultiPhotos.map((oldProfilePhoto, index) => {\n                                                    return (<img key={index} style={{ position: 'relative', float: 'left', width: '200px' }}\n                                                        className=\"img-responsive center-block\"\n                                                        src={oldProfilePhoto.indexOf(\"http\") !== 1 ?\n                                                            process.env.REACT_APP_API_URL +\n                                                            \"/\" +\n                                                            oldProfilePhoto : oldProfilePhoto\n                                                        } alt=\"pic holder\"\n                                                    />)\n                                                }) : \"\"}\n                                        </div>\n                                        <div>\n                                            {/* <p style={{ height: '140px', lineHeight: '20px', overflow: 'hidden' }}>\n                                                {this.state.note}\n                                            </p> */}\n                                        </div>\n\n\n                                        <hr></hr>\n                                        <strong>\n                                            <i className=\" margin-r-5\"></i> Bibliography : {this.state.Bibliography}\n                                        </strong>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <Sidebar />\n                <Footer />\n            </div>\n        );\n    }\n}\n\nconst state = (state, ownProps = {}) => {\n    return {\n        reportUser: state.reportUser.reportUser,\n        blockUser: state.blockUser.blockUser,\n        getUserLikes: state.getUserLikes.getUserLikes,\n        location: state.location,\n        getUserInterests: state.getUserInterests.getUserInterests,\n        getProfileInfo: state.getProfileInfo.getProfileInfo,\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        navigateTo: (location) => {\n            dispatch(push(location));\n        },\n        onGetUserInfo: (userId) => dispatch(GetUserInfo(userId)),\n        onGetUserIntrests: (userId) => dispatch(GetUserIntrests(userId)),\n        onGetuserLikes: (userId) => dispatch(GetuserLikes(userId)),\n        onPutUpdateUserLikes: (userId, cheker) => dispatch(PutUpdateUserLikes(userId, cheker)),\n        onBlockThisUser: (blocked_userId) => dispatch(BlockThisUser(blocked_userId)),\n        onVisitThisUser: (visited_userId) => dispatch(VisitThisUser(visited_userId)),\n        onreportThisUser: (reported_userId) => dispatch(reportThisUser(reported_userId)),\n        onPutUpdateUserUnlikes: (userId) => dispatch(PutUpdateUserUnlikes(userId))\n    }\n};\n\nexport default connect(\n    state,\n    mapDispatchToProps\n)(ProfileDetails);\n"]},"metadata":{},"sourceType":"module"}