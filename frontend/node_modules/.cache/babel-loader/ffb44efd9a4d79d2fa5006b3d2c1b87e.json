{"ast":null,"code":"import _regeneratorRuntime from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/abn/my-projects/matcha-42/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{push}from\"react-router-redux\";import{GetCurrentUserInfo}from'../../store/actions/UsersActions/FetchCurrentUserInfoAction';var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);function Header(props){var _this;_classCallCheck(this,Header);_this=_possibleConstructorReturn(this,_getPrototypeOf(Header).call(this,props));_this.state={firstname:\"\",lastname:\"\",profilePhoto:\"\"};return _this;}_createClass(Header,[{key:\"UNSAFE_componentWillMount\",value:function(){var _UNSAFE_componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userId=localStorage.getItem(\"userId\");_context.next=3;return this.props.onGetCurrentUserInfo(userId);case 3:case\"end\":return _context.stop();}}},_callee,this);}));function UNSAFE_componentWillMount(){return _UNSAFE_componentWillMount.apply(this,arguments);}return UNSAFE_componentWillMount;}()},{key:\"getProfilePicture\",value:function getProfilePicture(pictures,state){var pics=[];var i=0;while(i<pictures.length){if(pictures[i].state===state)pics.push(pictures[i].path);i++;}return pics;}},{key:\"initProfileInformation\",value:function initProfileInformation(data){var userInfo=data.info;var profilePhoto=this.getProfilePicture(data.pictures,1);this.setState({firstname:userInfo.firstname,lastname:userInfo.lastname,profilePhoto:profilePhoto.length>0?profilePhoto:\"\"});}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.getCurrentProfileInfo.data)this.initProfileInformation(nextProps.getCurrentProfileInfo.data);}},{key:\"render\",value:function render(){var image=\"https://mgdetective.ma/wp-content/uploads/2018/05/profile.png\";return React.createElement(\"header\",{className:\"main-header\"},React.createElement(\"a\",{href:\"/\",className:\"logo\"},React.createElement(\"span\",{className:\"logo-mini\"},React.createElement(\"b\",null,\"LME\")),React.createElement(\"span\",{className:\"logo-lg\"},React.createElement(\"b\",null,\"Match\"),\"Me\")),React.createElement(\"nav\",{className:\"navbar navbar-static-top\"},React.createElement(\"a\",{href:\"/\",className:\"sidebar-toggle\",\"data-toggle\":\"push-menu\",role:\"button\"},React.createElement(\"span\",{className:\"sr-only\"},\"Toggle navigation\")),React.createElement(\"div\",{className:\"navbar-custom-menu\",style:{zIndex:\"1223\"}},React.createElement(\"ul\",{className:\"nav navbar-nav\"},React.createElement(\"li\",{className:\"dropdown user user-menu\"},React.createElement(\"a\",{href:\"/\",className:\"dropdown-toggle\",\"data-toggle\":\"dropdown\"},React.createElement(\"img\",{src:this.state.profilePhoto!==\"\"&&this.state.profilePhoto.toString().substring(0,5)==='https'?this.state.profilePhoto:this.state.profilePhoto===\"\"?image:process.env.REACT_APP_API_URL+\"/\"+this.state.profilePhoto,className:\"user-image\",alt:\"User Image5\"}),React.createElement(\"span\",{className:\"hidden-xs\"},this.state.firstname,\" \",this.state.lastname)),React.createElement(\"ul\",{className:\"dropdown-menu\"},React.createElement(\"li\",{className:\"user-header\"},React.createElement(\"img\",{src:this.state.profilePhoto!==\"\"&&this.state.profilePhoto.toString().substring(0,5)==='https'?this.state.profilePhoto:this.state.profilePhoto===\"\"?image:process.env.REACT_APP_API_URL+\"/\"+this.state.profilePhoto,className:\"img-circle\",alt:\"User Image7\"}),React.createElement(\"p\",null,this.state.firstname,\" \",this.state.lastname)),React.createElement(\"li\",{className:\"user-body\"},React.createElement(\"div\",{className:\"row\"})),React.createElement(\"li\",{className:\"user-footer\"},React.createElement(\"div\",{className:\"pull-left\"},React.createElement(Link,{to:\"/profile\",onClick:this.props.navigateTo.bind(this,'/profile'),className:\"btn btn-default btn-flat\"},\"Profile\")),React.createElement(\"div\",{className:\"pull-right\"},React.createElement(Link,{to:\"/logout\",onClick:this.props.navigateTo.bind(this,'/logout'),className:\"btn btn-default btn-flat\"},\"Deconnexion\")))))))));}}]);return Header;}(React.Component);var state=function state(_state){var ownProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{getCurrentProfileInfo:_state.getCurrentProfileInfo.getCurrentProfileInfo,location:_state.location};};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){return{navigateTo:function navigateTo(location){dispatch(push(location));},onGetCurrentUserInfo:function onGetCurrentUserInfo(userId){return dispatch(GetCurrentUserInfo(userId));}};};export default connect(state,mapDispatchToProps)(Header);","map":{"version":3,"sources":["/home/abn/my-projects/matcha-42/frontend/src/components/common/Header.js"],"names":["React","Link","connect","push","GetCurrentUserInfo","Header","props","state","firstname","lastname","profilePhoto","userId","localStorage","getItem","onGetCurrentUserInfo","pictures","pics","i","length","path","data","userInfo","info","getProfilePicture","setState","nextProps","getCurrentProfileInfo","initProfileInformation","image","zIndex","toString","substring","process","env","REACT_APP_API_URL","navigateTo","bind","Component","ownProps","location","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { GetCurrentUserInfo } from '../../store/actions/UsersActions/FetchCurrentUserInfoAction';\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstname: \"\",\n      lastname: \"\",\n      profilePhoto: \"\",\n    }\n  }\n\n  async UNSAFE_componentWillMount() {\n    const userId = localStorage.getItem(\"userId\");\n    await this.props.onGetCurrentUserInfo(userId);\n  }\n\n  getProfilePicture(pictures, state) {\n    let pics = [];\n    let i = 0;\n    while (i < pictures.length) {\n      if (pictures[i].state === state)\n        pics.push(pictures[i].path)\n      i++;\n    }\n\n    return pics;\n  }\n\n  initProfileInformation(data) {\n    let userInfo = data.info;\n    let profilePhoto = this.getProfilePicture(data.pictures, 1);\n\n    this.setState({\n      firstname: userInfo.firstname,\n      lastname: userInfo.lastname,\n      profilePhoto: profilePhoto.length > 0 ? profilePhoto : \"\",\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.getCurrentProfileInfo.data)\n      this.initProfileInformation(nextProps.getCurrentProfileInfo.data);\n  }\n\n  render() {\n    let image = \"https://mgdetective.ma/wp-content/uploads/2018/05/profile.png\"\n\n    return (\n      <header className=\"main-header\">\n        <a href=\"/\" className=\"logo\">\n          <span className=\"logo-mini\"><b>LME</b></span>\n          <span className=\"logo-lg\"><b>Match</b>Me</span>\n        </a>\n        <nav className=\"navbar navbar-static-top\">\n          <a href=\"/\" className=\"sidebar-toggle\" data-toggle=\"push-menu\" role=\"button\">\n            <span className=\"sr-only\">Toggle navigation</span>\n          </a>\n\n          <div className=\"navbar-custom-menu\" style={{ zIndex: \"1223\" }}>\n            <ul className=\"nav navbar-nav\">\n              {/* <li className=\"dropdown notifications-menu\">\n                <a href=\"/\" className=\"dropdown-toggle\" data-toggle=\"dropdown\">\n                  <i className=\"fa fa-bell-o\"></i>\n                  <span className=\"label label-warning\">10</span>\n                </a>\n                <ul className=\"dropdown-menu\">\n                  <li className=\"header\">You have 10 notifications</li>\n                  <li>\n                    <ul className=\"menu\">\n                      <li>\n                        <a href=\"/\">\n                          <i className=\"fa fa-users text-aqua\"></i> 5 new members joined today\n                            </a>\n                      </li>\n                      <li>\n                        <a href=\"/\">\n                          <i className=\"fa fa-warning text-yellow\"></i> Very long description here that may not fit into the\n                          page and may cause design problems\n                            </a>\n                      </li>\n                      <li>\n                        <a href=\"/\">\n                          <i className=\"fa fa-users text-red\"></i> 5 new members joined\n                            </a>\n                      </li>\n                      <li>\n                        <a href=\"/\">\n                          <i className=\"fa fa-shopping-cart text-green\"></i> 25 sales made\n                            </a>\n                      </li>\n                      <li>\n                        <a href=\"/\">\n                          <i className=\"fa fa-user text-red\"></i> You changed your username\n                            </a>\n                      </li>\n                    </ul>\n                  </li>\n                  <li className=\"footer\"><a href=\"/Notifications\">View all</a></li>\n                </ul>\n              </li> */}\n\n              <li className=\"dropdown user user-menu\">\n                <a href=\"/\" className=\"dropdown-toggle\" data-toggle=\"dropdown\">\n                  <img src={this.state.profilePhoto !== \"\" && this.state.profilePhoto.toString().substring(0, 5) === 'https' ?\n                    this.state.profilePhoto\n                    : this.state.profilePhoto === \"\" ? image : \n                    process.env.REACT_APP_API_URL + \"/\" + this.state.profilePhoto}\n                    className=\"user-image\" alt=\"User Image5\" />\n                  <span className=\"hidden-xs\">{this.state.firstname} {this.state.lastname}</span>\n                </a>\n                <ul className=\"dropdown-menu\">\n                  <li className=\"user-header\">\n                    <img src={this.state.profilePhoto !== \"\"  && this.state.profilePhoto.toString().substring(0, 5) === 'https' ?\n                      this.state.profilePhoto\n                      : this.state.profilePhoto === \"\" ? image : process.env.REACT_APP_API_URL + \"/\" + this.state.profilePhoto}\n                      className=\"img-circle\" alt=\"User Image7\" />\n\n                    <p>\n                      {this.state.firstname} {this.state.lastname}\n                      {/* <small>Membre depuis 2019</small> */}\n                    </p>\n                  </li>\n                  <li className=\"user-body\">\n                    <div className=\"row\">\n                    </div>\n                  </li>\n                  <li className=\"user-footer\">\n                    <div className=\"pull-left\">\n                      <Link to=\"/profile\" onClick={this.props.navigateTo.bind(this, '/profile')} className=\"btn btn-default btn-flat\">Profile</Link></div>\n                    <div className=\"pull-right\">\n                      <Link to=\"/logout\" onClick={this.props.navigateTo.bind(this, '/logout')} className=\"btn btn-default btn-flat\">Deconnexion</Link>\n                    </div>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n\n\nconst state = (state, ownProps = {}) => {\n  return {\n    getCurrentProfileInfo: state.getCurrentProfileInfo.getCurrentProfileInfo,\n    location: state.location,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    navigateTo: (location) => {\n      dispatch(push(location));\n    },\n    onGetCurrentUserInfo: (userId) => dispatch(GetCurrentUserInfo(userId)),\n  }\n};\n\nexport default connect(state, mapDispatchToProps)(Header);"]},"metadata":{},"sourceType":"module"}